<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Ais | æˆ‘çš„åšå®¢</title><meta name=keywords content><meta name=description content="Ais - æˆ‘çš„åšå®¢"><meta name=author content="Pan Binghong"><link rel=canonical href=https://Pan-Binghong.github.io/ai/><link crossorigin=anonymous href=/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css integrity="sha256-NDzEgLn/yPBMy+XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as=style><link rel=icon href=https://Pan-Binghong.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://Pan-Binghong.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://Pan-Binghong.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://Pan-Binghong.github.io/apple-touch-icon.png><link rel=mask-icon href=https://Pan-Binghong.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://Pan-Binghong.github.io/ai/index.xml title=rss><link rel=alternate hreflang=en href=https://Pan-Binghong.github.io/ai/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://Pan-Binghong.github.io/ai/"><meta property="og:site_name" content="æˆ‘çš„åšå®¢"><meta property="og:title" content="Ais"><meta property="og:description" content="ä¸ªäººå­¦ä¹ ç¬”è®°åšå®¢"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ais"><meta name=twitter:description content="ä¸ªäººå­¦ä¹ ç¬”è®°åšå®¢"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Ais","item":"https://Pan-Binghong.github.io/ai/"}]}</script></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://Pan-Binghong.github.io/ accesskey=h title="æˆ‘çš„åšå®¢ (Alt + H)">æˆ‘çš„åšå®¢</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://Pan-Binghong.github.io/ title=é¦–é¡µ><span>é¦–é¡µ</span></a></li><li><a href=https://Pan-Binghong.github.io/ai/ title=AI><span class=active>AI</span></a></li><li><a href=https://Pan-Binghong.github.io/knowledge/ title=çŸ¥è¯†åº“><span>çŸ¥è¯†åº“</span></a></li><li><a href=https://Pan-Binghong.github.io/backend/ title=åç«¯><span>åç«¯</span></a></li><li><a href=https://Pan-Binghong.github.io/devops/ title=DevOps><span>DevOps</span></a></li><li><a href=https://Pan-Binghong.github.io/other/ title=å…¶ä»–><span>å…¶ä»–</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Ais</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>EvalScopeå¤§æ¨¡å‹éªŒè¯„æ¡†æ¶</h2></header><div class=entry-content><p>ğŸ’¡ ä¹‹å‰éƒ½æ˜¯ä½¿ç”¨vllmæˆ–è€…sglangå®˜æ–¹æä¾›çš„benchmarkè„šæœ¬ï¼Œç°åœ¨å°è¯•æ›´æ¢ä¸ºEvalScopeæ¡†æ¶ã€‚è®°å½•ä½¿ç”¨è¯¥æ¡†æ¶å¯¹é€Ÿåº¦è¿›è¡ŒåŸºå‡†æµ‹è¯•å…¨æµç¨‹ã€‚
1. å®‰è£… å®˜æ–¹æä¾›3ç§å®‰è£…æ–¹å¼ï¼Œ1.pip/2.source code/3.dockerã€‚
Pipå®‰è£… æ›´æ–°pip pipå®‰è£… æºç å®‰è£… | æ¨è ä¸‹è½½ä»£ç  ç¼–è¯‘ Dockerå®‰è£… https://modelscope.cn/docs/intro/environment-setup#%E6%9C%80%E6%96%B0%E9%95%9C%E5%83%8F
æ‹‰å–é•œåƒ åˆ›å»ºå®¹å™¨ 2. è¿è¡Œæ¨¡å‹æ¨ç†æ€§èƒ½å‹æµ‹ å‚æ•°è¯¦ç»†è¯´æ˜ï¼šhttps://evalscope.readthedocs.io/zh-cn/latest/user_guides/stress_test/parameters.html
æ¨ç†æ€§èƒ½æµ‹è¯•æœ‰2ç§ç­–ç•¥ï¼Œç¬¬ä¸€ç§ä¸ºæ ‡å‡†çš„å¹¶å‘å‹åŠ›æµ‹è¯•ï¼Œç¬¬äºŒç§ä¸ºå•å¹¶å‘ä¸‹çš„é€Ÿåº¦æµ‹è¯•ã€‚åœ¨è¯¥æ¡†æ¶ä¸‹ï¼Œç‰¹åˆ«è¯´æ˜äº†å¦‚æœéœ€è¦ä½¿ç”¨é€Ÿåº¦æµ‹è¯•ï¼Œåˆ™urléœ€è¦è®¾ç½®ä¸º/v1/completionsã€‚https://evalscope.readthedocs.io/zh-cn/latest/user_guides/stress_test/speed_benchmark.html
å‘½ä»¤è¡Œæ–¹å¼å¯åŠ¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 # eval.sh CUDA_VISIBLE_DEVICES=0,1,2,3 \ evalscope perf \ --parallel 20 \ --model /data/DeepSeek-R1-Distill-Llama-70B \ --url http://127.0.0.1:8000/v1/chat/completions \ --port 8000 \ --api local_vllm \ --dataset random \ --max-tokens 640 \ --prefix-length 64 \ --min-prompt-length 32 \ --max-prompt-length 64 \ --number 100 \ --tokenizer-path /data/DeepSeek-R1-Distill-Llama-70B \ --stream \ # ä¸ºäº†æˆªå›¾ï¼Œæš‚å…ˆå–æ¶ˆè®¾ç½®è¯¥å‚æ•° #--debug æµ‹è¯•é•¿æˆªå›¾ 3. å¯è§†åŒ– å®‰è£…wandbä¾èµ–åŒ… æ³¨å†Œ + è·å–å¯†é’¥ è¿è¡Œå‘½ä»¤åè¿½åŠ  ç»“æœå±•ç¤º æˆªå›¾ 4. æµ‹è¯„æ¨¡å‹èƒ½åŠ› é¦–å…ˆå°†æ¨¡å‹å¯åŠ¨ï¼Œä½¿ç”¨vllmæ¡†æ¶è¿›è¡Œå¯åŠ¨ï¼švllm serve /data/DeepSeek-R1-Distill-Qwen-7B â€“tensor-parallel-size 2 è¿è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹è¾“å‡ºä¸€ä¸ªoutputæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­ä¿å­˜ç€æ—¥å¿—æ–‡ä»¶ã€‚å¯ä»¥å°†æ—¥å¿—è·¯å¾„ä¿å­˜ã€‚ ç»ˆç«¯è¾“å…¥ï¼š è®¿é—®æœ¬åœ°çš„7860ç«¯å£ï¼š References
...</p></div><footer class=entry-footer><span title='2025-03-28 01:13:00 +0000 UTC'>March 28, 2025</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to EvalScopeå¤§æ¨¡å‹éªŒè¯„æ¡†æ¶" href=https://Pan-Binghong.github.io/ai/evalscope%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%AA%8C%E8%AF%84%E6%A1%86%E6%9E%B6/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>åŸºäºEasy DataSetåˆ›å»ºè‡ªå®šä¹‰æ•°æ®é›†</h2></header><div class=entry-content><p>ğŸ’¡ å‰å‡ å¤©çœ‹è§†é¢‘å‘ç°ä¸€ä¸ªå¼€æºçš„æ„å»ºæ•°æ®é›†é¡¹ç›®ï¼Œæ‰“ç®—å¤ç°ç©ä¸€ä¸‹ã€‚è¿™é‡Œè®°å½•å…¨æµç¨‹ã€‚
ç¯å¢ƒå®‰è£… æœ¬äººä½¿ç”¨Ubuntuç³»ç»Ÿã€‚é¦–å…ˆå®‰è£…node.jsä»¥åŠnpmã€‚
ä½¿ç”¨nvmï¼Œå®‰è£…nodejsä»¥åŠnpm å®‰è£…pnpm æ£€æŸ¥å®‰è£…æ˜¯å¦æ­£ç¡® Easy DataSetå¹³å°å®‰è£… ä½¿ç”¨githubä¸‹è½½æºä»£ç  å®‰è£…ä»£ç æ‰€éœ€ä¾èµ–åŒ… ä½¿ç”¨pnpmçš„ç‰¹ç‚¹:
Easy DataSetå¯åŠ¨ åŸºäºä»£ç æ„å»ºé¡¹ç›® å¯åŠ¨åº”ç”¨ç¨‹åº æ€ä¹ˆä½¿ç”¨Easy DataSet æ–°å»ºé¡¹ç›® é…ç½®å¤§æ¨¡å‹ ä¸Šä¼ æ•°æ® åŸºäºåˆ†å‰²çš„æ–‡æœ¬ï¼Œæ„å»ºé—®é¢˜ æ„å»ºæ•°æ®é›† å¯¼å‡ºæ•°æ®é›† References</p></div><footer class=entry-footer><span title='2025-03-27 03:06:00 +0000 UTC'>March 27, 2025</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to åŸºäºEasy DataSetåˆ›å»ºè‡ªå®šä¹‰æ•°æ®é›†" href=https://Pan-Binghong.github.io/ai/%E5%9F%BA%E4%BA%8Eeasy-dataset%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E9%9B%86/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>åŸºäºMCPæ„å»ºè®ºæ–‡æœç´¢æœåŠ¡</h2></header><div class=entry-content><p>ğŸ’¡ ç®€å•çš„å¤ç°ä¸€ä¸‹ï¼Œmcpå®˜æ–¹python-sdkä»“åº“çš„exampleã€‚
MCPä»‹ç» å…¨ç§°ä¸ºï¼šModel Context Protocol| æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ã€‚æ˜¯ä¸€ä¸ªåœ¨ç»Ÿä¸€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸å¤–éƒ¨æ•°æ®æºå’Œå·¥å…·ä¹‹é—´çš„é€šä¿¡åè®®ã€‚MCP çš„ä¸»è¦ç›®çš„åœ¨äºè§£å†³å½“å‰ AI æ¨¡å‹å› æ•°æ®å­¤å²›é™åˆ¶è€Œæ— æ³•å……åˆ†å‘æŒ¥æ½œåŠ›çš„éš¾é¢˜ï¼ŒMCP ä½¿å¾— AI åº”ç”¨èƒ½å¤Ÿå®‰å…¨åœ°è®¿é—®å’Œæ“ä½œæœ¬åœ°åŠè¿œç¨‹æ•°æ®ï¼Œä¸º AI åº”ç”¨æä¾›äº†è¿æ¥ä¸‡ç‰©çš„æ¥å£ã€‚
æ”¯æŒMCPçš„å®¢æˆ·ç«¯ References</p></div><footer class=entry-footer><span title='2025-03-25 06:23:00 +0000 UTC'>March 25, 2025</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to åŸºäºMCPæ„å»ºè®ºæ–‡æœç´¢æœåŠ¡" href=https://Pan-Binghong.github.io/ai/%E5%9F%BA%E4%BA%8Emcp%E6%9E%84%E5%BB%BA%E8%AE%BA%E6%96%87%E6%90%9C%E7%B4%A2%E6%9C%8D%E5%8A%A1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>åŸºäºSwiftæ¡†æ¶å¾®è°ƒå¤šæ¨¡æ€å¤§æ¨¡å‹</h2></header><div class=entry-content><p>ğŸ’¡ è®°å½•ä½¿ç”¨Swiftæ¡†æ¶å¾®è°ƒè‡³æ¨ç†å¤šæ¨¡æ€å¤§æ¨¡å‹çš„å…¨æµç¨‹ï¼Œæ¨¡å‹é‡‡ç”¨Qwen_VL_2.5-7bã€‚
1. åŸºç¡€ç¯å¢ƒå®‰è£… https://swift.readthedocs.io/zh-cn/latest/GetStarted/SWIFT%E5%AE%89%E8%A3%85.html
é‡‡ç”¨pipåŒ…ç®¡ç†å™¨å®‰è£…ï¼š
1 pip install 'ms-swift[all]' -U 2. ä¸‹è½½æ¨¡å‹ https://modelscope.cn/models/Qwen/Qwen2-VL-7B-Instruct
ä½¿ç”¨gitä¸‹è½½ï¼š
1 git clone https://www.modelscope.cn/Qwen/Qwen2-VL-7B-Instruct.git æ¨¡å‹ç›®å½•æˆªå›¾ï¼š
3. ä¸‹è½½æ•°æ®é›† æ•°æ®é›†1 https://modelscope.cn/datasets/AI-ModelScope/coco/summary
ä½¿ç”¨gitä¸‹è½½ï¼š
1 git clone https://www.modelscope.cn/datasets/AI-ModelScope/coco.git ç›®å½•æ˜¾ç¤ºï¼š
æ•°æ®é›†é¢„è§ˆ æ•°æ®é›†2 https://www.modelscope.cn/datasets/wangrongsheng/LLaVa-Instruction-MLLM/summary
1 git clone https://www.modelscope.cn/datasets/wangrongsheng/LLaVa-Instruction-MLLM.git ä¸‹è½½åçš„ç›®å½•æ˜¾ç¤ºä¸ºï¼š
è¾“å…¥ï¼šunzip llava_ins_image.zip è§£å‹å›¾ç‰‡å‹ç¼©åŒ…ã€‚å¾—åˆ°ä»¥ä¸Šçº¢æ¡†å†…å®¹ã€‚
æ•°æ®é›†æˆªå›¾é¢„è§ˆ 4. å¾®è°ƒ 4.1 æ£€æŸ¥å¾®è°ƒç¯å¢ƒ 1 2 3 pip list | grep swift # å›æ˜¾ä¸€ä¸‹å†…å®¹è¡¨ç¤ºæ­£ç¡® ms_swift 3.2.1 4.2 åŸºäºWebUIå¾®è°ƒ 1 swift web-ui --lang zh ...</p></div><footer class=entry-footer><span title='2025-03-21 06:10:00 +0000 UTC'>March 21, 2025</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to åŸºäºSwiftæ¡†æ¶å¾®è°ƒå¤šæ¨¡æ€å¤§æ¨¡å‹" href=https://Pan-Binghong.github.io/ai/%E5%9F%BA%E4%BA%8Eswift%E6%A1%86%E6%9E%B6%E5%BE%AE%E8%B0%83%E5%A4%9A%E6%A8%A1%E6%80%81%E5%A4%A7%E6%A8%A1%E5%9E%8B/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>åŸºäºSGLangæ¡†æ¶è¿›è¡ŒBenchmarkæµ‹è¯•</h2></header><div class=entry-content><p>ğŸ’¡ SGLangæœ€è¿‘æ›´æ–°äº†ï¼Œæ‰“ç®—é‡æ–°å†™ä¸€ä»½æµ‹è¯•æ‰‹å†Œã€‚å¹¶ä¸”ä¼˜åŒ–äº†ä¸€ä¸‹æ‰¹é‡æµ‹è¯•è„šæœ¬ã€‚æµ‹è¯•å¯¹è±¡ä¸ºDeepSeek-R1-Distill-å®˜æ–¹æä¾›çš„å…­ä¸ªç‰ˆæœ¬ã€‚
1. ç¯å¢ƒé…ç½® æ‹‰å–æœ€æ–°ç‰ˆSGLangé•œåƒ
1 docker pull lmsysorg/sglang:latest 2. å¯åŠ¨å®¹å™¨ 1 2 3 4 5 docker run -dit --gpus all \ --shm-size 32g \ -v /home/weights:/data/ \ --ipc=host \ --name sglang lmsysorg/sglang:latest /bin/bash ğŸ’¡ -v /home/weights:/data/ æ›¿æ¢ä¸ºè‡ªå·±æ¨¡å‹çš„è·¯å¾„ã€‚
3. è¿›å…¥å®¹å™¨ 1 docker exec -it sglang /bin/bash è·¯å¾„æ£€æŸ¥ SGLangé¡¹ç›®è·¯å¾„ï¼š/sgl-workspace/sglang æ¨¡å‹æƒé‡è·¯å¾„ï¼š/data/DeepSeek-R1-Distill-Llama-70B 4. å‘å¸ƒæ¨¡å‹æœåŠ¡ 1 python3 -m sglang.launch_server --model-path /data/DeepSeek-R1-Distill-Llama-70B --host 0.0.0.0 --port 30000 --tp-size 4 --enable-p2p-check ...</p></div><footer class=entry-footer><span title='2025-03-21 00:33:00 +0000 UTC'>March 21, 2025</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to åŸºäºSGLangæ¡†æ¶è¿›è¡ŒBenchmarkæµ‹è¯•" href=https://Pan-Binghong.github.io/ai/%E5%9F%BA%E4%BA%8Esglang%E6%A1%86%E6%9E%B6%E8%BF%9B%E8%A1%8Cbenchmark%E6%B5%8B%E8%AF%95/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Open WebUIç§æœ‰åŒ–éƒ¨ç½²|vLLM</h2></header><div class=entry-content><p>ğŸ’¡ åœ¨è£¸é‡‘å±ä¸Šå¯¹DeepSeekç³»åˆ—æ¨¡å‹è¿›è¡ŒæŒ‡æ ‡æµ‹è¯•åï¼Œæœ‰ç‚¹æ— èŠã€‚éšä¾¿éƒ¨ç½²ä¸€ä¸ªWebUIç©ç©ã€‚
å®‰è£… è¯¥å‰ç«¯æ¡†æ¶é‡‡ç”¨dockeré•œåƒéƒ¨ç½²ï¼Œæ¨¡å‹é‡‡ç”¨vllmé•œåƒå•ç‹¬å‘å¸ƒã€‚
æ‹‰å–æœ€æ–°ç‰ˆæœ¬é•œåƒ å¯åŠ¨å®¹å™¨ æ‰“å¼€æµè§ˆå™¨æŸ¥çœ‹8000ç«¯å£ è¸©å‘ æ¨¡å‹URLåœ°å€è¦å†™V1 ä½¿ç”¨openai apiè¿›è¡Œé“¾æ¥ä¸€ç›´æŠ¥503çš„é”™ï¼Œè¿›åˆ°backend/open_webui/utils/model.pyï¼Œæ³¨é‡Šä»¥ä¸‹ä»£ç å³å¯ã€‚ References</p></div><footer class=entry-footer><span title='2025-03-17 01:36:00 +0000 UTC'>March 17, 2025</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to Open WebUIç§æœ‰åŒ–éƒ¨ç½²|vLLM" href=https://Pan-Binghong.github.io/ai/open-webui%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2vllm/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>vLLMæ¡†æ¶éƒ¨ç½²|æ€§èƒ½æµ‹è¯„DeepSeekè’¸é¦ç‰ˆå…¨æµç¨‹</h2></header><div class=entry-content><p>ç¯å¢ƒå®‰è£… å®‰è£…docker å®‰è£…nvidia-docker2 é…ç½®dockeræº æ‹‰å–é•œåƒ æ¨¡å‹ä¸‹è½½ 1 2 3 4 5 6 7 8 python3 -m pip install --upgrade pip -i https://pypi.tuna.tsinghua.edu.cn/simple pip install packaging -i https://pypi.tuna.tsinghua.edu.cn/simple pip install modelscope -i https://pypi.tuna.tsinghua.edu.cn/simple modelscope download --model deepseek-ai/DeepSeek-R1-Distill-Llama-8B --local_dir /data/DeepSeek-R1-Distill-Llama-8B modelscope download --model deepseek-ai/DeepSeek-R1-Distill-Qwen-32B --local_dir /data/DeepSeek-R1-Distill-Qwen-32B modelscope download --model deepseek-ai/DeepSeek-R1-Distill-Qwen-14B --local_dir /data/DeepSeek-R1-Distill-Qwen-14B modelscope download --model deepseek-ai/DeepSeek-R1-Distill-Qwen-7B --local_dir /data/DeepSeek-R1-Distill-Qwen-7B modelscope download --model deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B --local_dir /data/DeepSeek-R1-Distill-Qwen-1.5B Benchmarkæµ‹è¯„ ä¸‹è½½å®˜æ–¹ä»£ç ï¼Œå†…å«benchmark_serving.pyæ€§èƒ½æµ‹è¯„ä»£ç  å¯åŠ¨å®¹å™¨ å®‰è£…vllmæ¨ç†ç¯å¢ƒ å¯åŠ¨æ¨¡å‹ è¿è¡Œæ€§èƒ½æµ‹è¯•è„šæœ¬ ç»“æœä¸€è§ˆ LLama8b Qwen1.5b Qwen7b Qwen14b Qwen32B</p></div><footer class=entry-footer><span title='2025-02-15 07:52:00 +0000 UTC'>February 15, 2025</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to vLLMæ¡†æ¶éƒ¨ç½²|æ€§èƒ½æµ‹è¯„DeepSeekè’¸é¦ç‰ˆå…¨æµç¨‹" href=https://Pan-Binghong.github.io/ai/vllm%E6%A1%86%E6%9E%B6%E9%83%A8%E7%BD%B2%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%84deepseek%E8%92%B8%E9%A6%8F%E7%89%88%E5%85%A8%E6%B5%81%E7%A8%8B/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Tokenizer</h2></header><div class=entry-content><p>ğŸ’¡ è¯¦ç»†è¯´æ˜Tokenizerçš„ä½œç”¨ï¼ŒåŸç†ï¼Œåº”ç”¨ä»¥åŠå„ä¸ªå¤§æ¨¡å‹ä¸­çš„Tokenizerã€‚
æ¦‚è¿° ä»€ä¹ˆæ˜¯Tokenizer Tokenizeræ˜¯NLPé¢†åŸŸä¸­çš„ä¸€ç§å…³é”®æŠ€æœ¯ï¼Œä¸»è¦ä½œç”¨ç”¨äºå°†æ–‡æœ¬å­—ç¬¦ä¸²åˆ’åˆ†ä¸ºTokenã€‚
åˆ†è¯æ–¹æ³• åˆ†è¯ç®—æ³•å¯ä»¥æ ¹æ®åˆ‡åˆ†çš„é¢—ç²’åº¦è¿›è¡Œåˆ†ç±»ï¼šåŸºäºè¯çš„åˆ‡åˆ†ã€åŸºäºå­—çš„åˆ‡åˆ†ã€åŸºäºå­è¯çš„åˆ‡åˆ†ã€‚
åŸºäºè¯çš„åˆ‡åˆ†ï¼ˆWord-Based Tokenizerï¼‰ åŸºäºå­—çš„åˆ‡åˆ†ï¼ˆCharacter-Based Tokenizerï¼‰ åŸºäºå­è¯çš„åˆ‡åˆ†ï¼ˆSub-word Tokenzierï¼‰ åŸºäºå­è¯åˆ†è¯ åŸºäºå­è¯çš„åˆ‡åˆ†èƒ½å¾ˆå¥½å¹³è¡¡åŸºäºè¯åˆ‡åˆ†å’ŒåŸºäºå­—åˆ‡åˆ†çš„ä¼˜ç¼ºç‚¹ï¼Œä¹Ÿæ˜¯ç›®å‰ä¸»æµæœ€ä¸»æµçš„åˆ‡åˆ†æ–¹å¼ã€‚å½“å‰çƒ­é—¨çš„åˆ†è¯æ¨¡å‹ï¼š
tokenizer.modelÂ çš„ä½œç”¨
å­˜å‚¨åˆ†è¯å™¨çš„æ¨¡å‹ï¼štokenizer.modelÂ æ–‡ä»¶åŒ…å«äº† SentencePiece åˆ†è¯å™¨çš„æ‰€æœ‰å¿…è¦ä¿¡æ¯ï¼Œä¾‹å¦‚è¯æ±‡è¡¨ã€åˆ†è¯è§„åˆ™å’Œå­è¯å•å…ƒçš„ç»Ÿè®¡ä¿¡æ¯ã€‚ æ”¯æŒå­è¯åˆ†è¯ï¼šSentencePiece ä½¿ç”¨ BPEï¼ˆByte Pair Encodingï¼‰æˆ– Unigram ç®—æ³•å°†æ–‡æœ¬åˆ†è§£ä¸ºå­è¯å•å…ƒï¼ˆsubword unitsï¼‰ï¼Œä»è€Œèƒ½å¤Ÿå¤„ç†æœªç™»å½•è¯ï¼ˆOOV, Out-Of-Vocabularyï¼‰å’Œç½•è§è¯ã€‚ è¯­è¨€æ— å…³æ€§ï¼šSentencePiece ç›´æ¥å¯¹åŸå§‹æ–‡æœ¬ï¼ˆåŒ…æ‹¬ç©ºæ ¼å’Œç‰¹æ®Šç¬¦å·ï¼‰è¿›è¡Œå¤„ç†ï¼Œå› æ­¤é€‚ç”¨äºå¤šç§è¯­è¨€ã€‚ 2. ä¸ºä»€ä¹ˆæœ‰äº›æ¨¡å‹æœ‰Â tokenizer.modelÂ æ–‡ä»¶ï¼Ÿ ä½¿ç”¨ SentencePiece åˆ†è¯å™¨ï¼šå¦‚æœæ¨¡å‹çš„åˆ†è¯å™¨æ˜¯åŸºäº SentencePiece å®ç°çš„ï¼Œé‚£ä¹ˆå°±ä¼šåŒ…å«Â tokenizer.modelÂ æ–‡ä»¶ã€‚ æ›¿ä»£ä¼ ç»Ÿçš„è¯æ±‡è¡¨æ–‡ä»¶ï¼šä¸ä¼ ç»Ÿçš„Â vocab.jsonÂ æˆ–Â merges.txtÂ ä¸åŒï¼Œtokenizer.modelÂ æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼ŒåŒ…å«äº†åˆ†è¯å™¨çš„æ‰€æœ‰ä¿¡æ¯ã€‚ å¤šè¯­è¨€æ”¯æŒï¼šSentencePiece ç‰¹åˆ«é€‚åˆå¤„ç†å¤šè¯­è¨€æ–‡æœ¬ï¼Œå› æ­¤è®¸å¤šå¤šè¯­è¨€æ¨¡å‹ï¼ˆå¦‚ mBERTã€XLM-Rï¼‰ä¼šä½¿ç”¨Â tokenizer.modelã€‚ 3.Â tokenizer.modelÂ çš„å†…å®¹ tokenizer.modelÂ æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé€šå¸¸åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
è¯æ±‡è¡¨ï¼šæ‰€æœ‰å­è¯å•å…ƒåŠå…¶å¯¹åº”çš„ IDã€‚ åˆ†è¯è§„åˆ™ï¼šå¦‚ä½•å°†æ–‡æœ¬æ‹†åˆ†ä¸ºå­è¯å•å…ƒã€‚ ç»Ÿè®¡ä¿¡æ¯ï¼šå­è¯å•å…ƒçš„å‡ºç°é¢‘ç‡ç­‰ã€‚ 5.Â tokenizer.modelÂ ä¸å…¶ä»–åˆ†è¯å™¨æ–‡ä»¶çš„åŒºåˆ« å°æ ‡é¢˜1 å°æ ‡é¢˜2 å°æ ‡é¢˜3 æ ‡é¢˜2 å°æ ‡é¢˜1 å°æ ‡é¢˜2 å°æ ‡é¢˜3 æ ‡é¢˜3 å°æ ‡é¢˜1 å°æ ‡é¢˜2 å°æ ‡é¢˜3 References
...</p></div><footer class=entry-footer><span title='2025-01-13 02:54:00 +0000 UTC'>January 13, 2025</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to Tokenizer" href=https://Pan-Binghong.github.io/ai/tokenizer/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>å¼€æºå¤§æ¨¡å‹æƒé‡æ–‡ä»¶è¯¦è§£</h2></header><div class=entry-content><p>ğŸ’¡ è®°å½•ä¸€ä¸‹ï¼ŒHFä¸Šçš„æ¨¡å‹æƒé‡æ–‡ä»¶çš„å„ä¸ªåŠŸèƒ½ä»¥åŠä½œç”¨ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ä»£ç æ„å»ºæŸäº›æ–‡ä»¶ã€‚
æƒé‡æ–‡ä»¶æ€»è§ˆ ä»¥ä¸‹ä¸ºHF|ModelScopeå†…çš„å‡ ä¸ªçƒ­é—¨çš„å¤§æ¨¡å‹æ–‡ä»¶æˆªå›¾ï¼š
é€šè¿‡è§‚å¯Ÿä»¥ä¸Šçš„æ¨¡å‹æ–‡ä»¶åï¼Œå¯ä»¥å‘ç°æ¨¡å‹çš„æ–‡ä»¶å†…å®¹ä¸»è¦æœ‰ï¼ˆæˆ‘åªä¿ç•™äº†ä¸€ä¸ªsafetensorsï¼‰ï¼š æˆ‘æŒ‰ç…§ç›¸åŒæ–‡ä»¶è¿›è¡Œåˆ†ç±»ï¼Œçº¢è‰²ä¸ºæ¯ä¸ªæ¨¡å‹åŸºæœ¬éƒ½å­˜åœ¨çš„éƒ¨åˆ†ï¼Œå¯ä»¥å…ˆç†è§£ä¸ºæ¨¡å‹æ–‡ä»¶ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ã€‚ç»¿è‰²ä¸ºå› æ¯ä¸ªæ¨¡å‹é‡‡ç”¨ä¸åŒçš„åˆ†è¯å™¨ï¼Œäº§å‡ºçš„æ–‡ä»¶ä¹Ÿå„ä¸ç›¸åŒï¼Œå‡ä¸ºè¾…åŠ©åˆ†è¯å™¨è¿è¡Œçš„æ–‡ä»¶ã€‚ç™½è‰²çš„æ–‡ä»¶ä¸ºä¸€äº›æè¿°æ¨¡å‹çš„æ–‡ä»¶ã€‚ æ–‡ä»¶è§£é‡Š æ ¸å¿ƒæ–‡ä»¶ è¾…åŠ©æ–‡ä»¶ è¯´æ˜æ–‡ä»¶ ä¸ºä»€ä¹ˆæœ‰çš„å¤§æ¨¡å‹æƒé‡æ–‡ä»¶ä¸ä¸€æ · é€šè¿‡è§‚å¯Ÿä¸Šé¢çš„æ¨¡å‹æ–‡ä»¶æˆªå›¾ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æœ‰éƒ¨åˆ†æ¨¡å‹çš„æ–‡ä»¶å„ä¸ç›¸åŒï¼Œä½†æ˜¯æœ€ç»ˆè¿˜æ˜¯å¯ä»¥é€šè¿‡ä»£ç æ¥è¿è¡Œæ¨¡å‹ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ
1 2 3 4 5 6 from transformers import AutoTokenizer, AutoModelForCausalLM model_id = r"Qwen\Qwen2.5-0.5B-Instruct" model = AutoModelForCausalLM.from_pretrained(model_id, dtype="auto", device_map="auto") tokenizer = AutoTokenizer.from_pretrained(model_id) ä½†æ˜¯ä¾æ—§å¯ä»¥é€šè¿‡ç›¸åŒçš„æ–¹æ³•è¿›è¡ŒåŠ è½½ã€‚
åˆ†è¯å™¨çš„æ–¹æ³•ä¸åŒå¯¼è‡´ å¦‚æœæ–‡ä»¶ä¸­å­˜åœ¨tokenizer.modelï¼Œåˆ™è¡¨ç¤ºè¯¥æ¨¡å‹é‡‡ç”¨SentencePieceå·¥å…·
References
https://github.com/j0rGeT/LLMs_interview_notes/blob/main/LLMs%20Tokenizer%20%E7%AF%87/LLMs%20Tokenizer%E7%AF%87.md
https://huggingface.co/Qwen/Qwen-7B
https://developers.googleblog.com/zh-hans/gemma-explained-overview-gemma-model-family-architectures/
https://huggingface.co/Qwen/Qwen2.5-0.5B-Instruct/tree/main
https://huggingface.co/deepseek-ai/DeepSeek-V3/tree/main
https://huggingface.co/Qwen/Qwen2.5-72B-Instruct/tree/main</p></div><footer class=entry-footer><span title='2025-01-13 01:28:00 +0000 UTC'>January 13, 2025</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to å¼€æºå¤§æ¨¡å‹æƒé‡æ–‡ä»¶è¯¦è§£" href=https://Pan-Binghong.github.io/ai/%E5%BC%80%E6%BA%90%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%9D%83%E9%87%8D%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>å¤ç°Knowledge-graph-studio</h2></header><div class=entry-content><p>ğŸ’¡ è¿™é‡Œå†™èƒŒæ™¯ã€‚
æ ‡é¢˜1 å°æ ‡é¢˜1 å°æ ‡é¢˜2 å°æ ‡é¢˜3 æ ‡é¢˜2 å°æ ‡é¢˜1 å°æ ‡é¢˜2 å°æ ‡é¢˜3 æ ‡é¢˜3 å°æ ‡é¢˜1 å°æ ‡é¢˜2 å°æ ‡é¢˜3 References è¿™é‡Œæ”¾å¼•ç”¨çš„é“¾æ¥ã€‚</p></div><footer class=entry-footer><span title='2024-12-13 14:56:00 +0000 UTC'>December 13, 2024</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to å¤ç°Knowledge-graph-studio" href=https://Pan-Binghong.github.io/ai/%E5%A4%8D%E7%8E%B0knowledge-graph-studio/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://Pan-Binghong.github.io/ai/>Â«&nbsp;Prev&nbsp;
</a><a class=next href=https://Pan-Binghong.github.io/ai/page/3/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://Pan-Binghong.github.io/>æˆ‘çš„åšå®¢</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>