# å·¥ä½œæµæ¨é€å†²çªä¿®å¤

## é—®é¢˜æè¿°

å·¥ä½œæµåœ¨æäº¤ Notion åŒæ­¥å†…å®¹æ—¶å¤±è´¥ï¼š
```
! [rejected]        master -> master (fetch first)
error: failed to push some refs
```

è¿™æ˜¯å› ä¸ºæœ¬åœ°æäº¤å’Œè¿œç¨‹ä»“åº“æœ‰åˆ†æ­§ã€‚

## ä¿®å¤æ–¹æ¡ˆ

### 1. æ·»åŠ  Git Token
åœ¨ checkout æ­¥éª¤ä¸­æ·»åŠ  tokenï¼Œç¡®ä¿æœ‰æ¨é€æƒé™ã€‚

### 2. æ”¹è¿›æ¨é€é€»è¾‘

**ä¿®æ”¹å‰ï¼š**
```bash
git commit -m "..."
git push origin ${{ github.ref_name }}
```

**ä¿®æ”¹åï¼š**
```bash
git commit -m "..."

# å…ˆæ‹‰å–è¿œç¨‹æ›´æ–°
git fetch origin
git rebase origin/${{ github.ref_name }} || {
  # å¦‚æœ rebase å¤±è´¥ï¼Œä½¿ç”¨ force-with-lease æ¨é€
  git rebase --abort
  git push --force-with-lease origin HEAD:${{ github.ref_name }}
  exit 0
}

# æ­£å¸¸æ¨é€
git push origin HEAD:${{ github.ref_name }}
```

## ä¸ºä»€ä¹ˆè¿™æ ·ä¿®å¤ï¼Ÿ

1. **å…ˆ fetch å† rebase**
   - è·å–æœ€æ–°çš„è¿œç¨‹æ›´æ–°
   - å°è¯•å°†æœ¬åœ°æäº¤ rebase åˆ°è¿œç¨‹åˆ†æ”¯ä¹‹ä¸Š
   - ä¿æŒæäº¤å†å²æ¸…æ™°

2. **ä½¿ç”¨ force-with-lease**
   - å¦‚æœ rebase å¤±è´¥ï¼ˆå¯èƒ½æ˜¯å†²çªï¼‰
   - ä½¿ç”¨ `--force-with-lease` å®‰å…¨åœ°å¼ºåˆ¶æ¨é€
   - æ¯” `--force` æ›´å®‰å…¨ï¼Œé¿å…è¦†ç›–å…¶ä»–äººçš„æäº¤

3. **ä½¿ç”¨ HEAD:${{ github.ref_name }}**
   - æ˜ç¡®æŒ‡å®šæ¨é€çš„æºå’Œç›®æ ‡åˆ†æ”¯
   - é¿å…åˆ†æ”¯åç§°æ··æ·†

## æµ‹è¯•æ–¹æ³•

1. æ‰‹åŠ¨è§¦å‘å·¥ä½œæµï¼š
   https://github.com/Pan-Binghong/daily-learning/actions

2. æŸ¥çœ‹æ—¥å¿—ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   ```
   ğŸ“ æ£€æµ‹åˆ°å†…å®¹æ›´æ–°ï¼Œå‡†å¤‡æäº¤...
   ğŸ“¥ æ‹‰å–è¿œç¨‹æ›´æ–°...
   ğŸ“¤ æ¨é€æ›´æ–°...
   âœ… å†…å®¹å·²æäº¤å¹¶æ¨é€
   ```

3. æˆ–è€…å¦‚æœ rebase å¤±è´¥ï¼š
   ```
   âš ï¸  è‡ªåŠ¨ rebase å¤±è´¥ï¼Œä¸­æ­¢å¹¶é‡è¯•...
   âœ… ä½¿ç”¨ force-with-lease æ¨é€æˆåŠŸ
   ```

## é¢„æœŸæ•ˆæœ

- âœ… å·¥ä½œæµä¸å†å› æ¨é€å†²çªè€Œå¤±è´¥
- âœ… è‡ªåŠ¨å¤„ç†è¿œç¨‹æ›´æ–°
- âœ… å®‰å…¨åœ°æ¨é€å†…å®¹
- âœ… ç»§ç»­æ„å»ºå’Œéƒ¨ç½² Hugo ç«™ç‚¹
