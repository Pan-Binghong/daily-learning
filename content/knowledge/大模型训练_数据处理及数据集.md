---
title: å¤§æ¨¡åž‹è®­ç»ƒ_æ•°æ®å¤„ç†åŠæ•°æ®é›†
date: '2025-04-28T03:00:00.000Z'
lastmod: '2025-04-28T06:26:00.000Z'
draft: false
tags:
- Knowledge
categories:
- çŸ¥è¯†
---

> ðŸ’¡ åŸºäºŽllama-factoryã€swiftçš„æ•°æ®å¤„ç†éƒ¨åˆ†ï¼Œè‡ªå·±è®°å½•å¹¶å­¦ä¹ å¤§æ¨¡åž‹è®­ç»ƒçš„æ•°æ®æ ¼å¼ã€‚

---

æœ¬å¸–å­æ ¹æ®https://llamafactory.readthedocs.io/zh-cn/latest/getting_started/data_preparation.html åŠ https://gitee.com/ascend/MindSpeed-LLM#%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86ï¼Œç²¾è¯»åŽæŒ‰ç…§ä¸ªäººçš„ç†è§£è¿›è¡Œè®°å½•å­¦ä¹ ã€‚

---

## 1. ä»»åŠ¡åœºæ™¯

æ ¹æ®ä¸åŒçš„è®­ç»ƒä»»åŠ¡åœºæ™¯ï¼Œæ•°æ®é›†æ ¼å¼ä¹Ÿä¸åŒã€‚

1. é¢„è®­ç»ƒ
1. å¾®è°ƒ
1. äººç±»åå¥½å¯¹é½è®­ç»ƒ
1. å¤šæ¨¡æ€
---

## 2. é¢„è®­ç»ƒ

é¢„è®­ç»ƒçš„å¼€æºæ•°æ®é›†ä¸»æµçš„æœ‰alpacaæ•°æ®é›†ï¼Œenwikiæ•°æ®é›†ï¼Œchinesewebtextç­‰ã€‚

### æ ¼å¼

```python
# data.json
[
  {"text": "document"},
  {"text": "document"}
]
```

### alpacaæ•°æ®é›†

https://huggingface.co/datasets/tatsu-lab/alpaca

è¯¥æ•°æ®é›†åŒ…å«é¢„è®­ç»ƒæ•°æ®ä»¥åŠå¾®è°ƒæ•°æ®ã€‚æ•°æ®é›†å…±æœ‰52kæ¡æ–‡æœ¬æ•°æ®ï¼Œæ–‡ä»¶å¤§å°ä¸º24.2MBã€‚å–å‡ºçœŸå®žçš„ä¸€æ¡æ•°æ®å±•ç¤ºï¼š

```python
{
    "instruction": "Create a classification task by clustering the given list of items.",
    "input": "Apples, oranges, bananas, strawberries, pineapples",
    "output": "Class 1: Apples, Oranges\nClass 2: Bananas, Strawberries\nClass 3: Pineapples",
    "text": "Below is an instruction that describes a task, paired with an input that provides further context. Write a response that appropriately completes the request.\n\n### Instruction:\nCreate a classification task by clustering the given list of items.\n\n### Input:\nApples, oranges, bananas, strawberries, pineapples\n\n### Response:\nClass 1: Apples, Oranges\nClass 2: Bananas, Strawberries\nClass 3: Pineapples",
}

```

---

## 3. å¾®è°ƒ

å¾®è°ƒä»»åŠ¡æ˜¯ç›®å‰æœ€å¸¸è§ä»¥åŠå¸¸ç”¨çš„ä»»åŠ¡ï¼Œå½“è®­ç»ƒä»»åŠ¡ä¸ºå¾®è°ƒæ—¶ï¼Œç›®å‰æœ‰2ç§ä¸»æµçš„æ•°æ®é›†æ ¼å¼ã€‚alpacaå’Œsharegptã€‚

è¿™ä¸¤ç§æ•°æ®é›†çš„æ ¼å¼åŒºåˆ†æŒºæ˜Žæ˜¾çš„ï¼Œalpacaæ ¼å¼ä¸­ï¼Œä¸»è¦å­—æ®µä¸ºinstruction,input,outputã€‚é€‚ç”¨äºŽåœºæ™¯å•ä¸€ï¼Œæ›´ä¸ºåž‚ç›´çš„ä»»åŠ¡ã€‚share gptæ ¼å¼åˆ™æ›´åŠ çµæ´»ï¼Œæ”¯æŒæ›´å¤šçš„è§’è‰²ï¼Œä¾‹å¦‚human/gpt/observation/functionã€‚è¿™äº›è§’è‰²å…¨éƒ¨æ”¾åœ¨ä¸€ä¸ªconversationsåˆ—ä¸­ã€‚

---

## 4. äººç±»åå¥½å¯¹é½è®­ç»ƒ

ä»…é æ— ç›‘ç£é¢„è®­ç»ƒæ— æ³•å®Œå…¨æ»¡è¶³å®žé™…åº”ç”¨ä¸­çš„éœ€æ±‚ï¼Œäººç±»åå¥½å¯¹é½è®­ç»ƒé€šè¿‡ç‰¹å®šçš„è®­ç»ƒè¿‡ç¨‹ï¼Œæ¨¡åž‹çš„è¾“å‡ºå¯ä»¥æ›´å¥½åœ°ä¸Žäººç±»åå¥½å¯¹é½ã€‚æˆ‘ä»¬å¹³æ—¶è§åˆ°çš„ xxx-instruct å’Œ xxx-chat æ¨¡åž‹ï¼Œå°±æ˜¯ç»è¿‡äº†äººç±»åå¥½å¯¹é½è®­ç»ƒçš„æ¨¡åž‹ã€‚

### 4.1 DPOå’ŒORPO

```python
[
  {
    "instruction": "äººç±»æŒ‡ä»¤ï¼ˆå¿…å¡«ï¼‰",
    "input": "äººç±»è¾“å…¥ï¼ˆé€‰å¡«ï¼‰",
    "chosen": "ä¼˜è´¨å›žç­”ï¼ˆå¿…å¡«ï¼‰",
    "rejected": "åŠ£è´¨å›žç­”ï¼ˆå¿…å¡«ï¼‰"
  }
]
```

### 4.2 KTO

```python
[
  {
    "instruction": "äººç±»æŒ‡ä»¤ï¼ˆå¿…å¡«ï¼‰",
    "input": "äººç±»è¾“å…¥ï¼ˆé€‰å¡«ï¼‰",
    "output": "æ¨¡åž‹å›žç­”ï¼ˆå¿…å¡«ï¼‰",
    "kto_tag": "äººç±»åé¦ˆ [true/false]ï¼ˆå¿…å¡«ï¼‰"
  }
]
```

---

## 5. å¤šæ¨¡æ€

### 5.1 å›¾åƒ

```python
[
  {
    "instruction": "äººç±»æŒ‡ä»¤ï¼ˆå¿…å¡«ï¼‰",
    "input": "äººç±»è¾“å…¥ï¼ˆé€‰å¡«ï¼‰",
    "output": "æ¨¡åž‹å›žç­”ï¼ˆå¿…å¡«ï¼‰",
    "images": [
      "å›¾åƒè·¯å¾„ï¼ˆå¿…å¡«ï¼‰"
    ]
  }
]
```

### 5.2 è§†é¢‘

```python
[
  {
    "instruction": "äººç±»æŒ‡ä»¤ï¼ˆå¿…å¡«ï¼‰",
    "input": "äººç±»è¾“å…¥ï¼ˆé€‰å¡«ï¼‰",
    "output": "æ¨¡åž‹å›žç­”ï¼ˆå¿…å¡«ï¼‰",
    "videos": [
      "è§†é¢‘è·¯å¾„ï¼ˆå¿…å¡«ï¼‰"
    ]
  }
]
```

### 5.3 éŸ³é¢‘

```python
[
  {
    "instruction": "äººç±»æŒ‡ä»¤ï¼ˆå¿…å¡«ï¼‰",
    "input": "äººç±»è¾“å…¥ï¼ˆé€‰å¡«ï¼‰",
    "output": "æ¨¡åž‹å›žç­”ï¼ˆå¿…å¡«ï¼‰",
    "audios": [
      "éŸ³é¢‘è·¯å¾„ï¼ˆå¿…å¡«ï¼‰"
    ]
  }
]
```

---

## å¤‡æ³¨ä¿¡æ¯

- ShareGPT æ ¼å¼ä¸­çš„ KTOæ•°æ®é›†(æ ·ä¾‹)å’Œå¤šæ¨¡æ€æ•°æ®é›†(æ ·ä¾‹) ä¸Ž Alpaca æ ¼å¼çš„ç±»ä¼¼ã€‚
- é¢„è®­ç»ƒæ•°æ®é›†ä¸æ”¯æŒ ShareGPT æ ¼å¼ã€‚
### Openaiçš„å¯¹è¯æ ¼å¼

ä»¥ä¸‹æ ¼å¼å±žäºŽshareGPTæ ¼å¼çš„ä¸€ç§ç‰¹æ®Šæ ¼å¼ã€‚

```python
[
  {
    "messages": [
      {
        "role": "system",
        "content": "ç³»ç»Ÿæç¤ºè¯ï¼ˆé€‰å¡«ï¼‰"
      },
      {
        "role": "user",
        "content": "äººç±»æŒ‡ä»¤"
      },
      {
        "role": "assistant",
        "content": "æ¨¡åž‹å›žç­”"
      }
    ]
  }
]
```

---

> Reference









