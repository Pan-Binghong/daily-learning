name: è‡ªåŠ¨æäº¤ä»£ç 

on:
  schedule:
    # æ¯å¤© UTC æ—¶é—´ 01:00 æ‰§è¡Œï¼ˆåŒ—äº¬æ—¶é—´ 09:00ï¼‰
    # å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹æ—¶é—´
    - cron: '0 1 * * *'
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  auto-commit:
    runs-on: ubuntu-latest
    
    # éœ€è¦å†™æƒé™æ¥æ¨é€ä»£ç 
    permissions:
      contents: write
    
    steps:
      - name: ğŸ“¦ æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
        with:
          # å¿…é¡»è®¾ç½® token æ‰èƒ½æ¨é€ä»£ç 
          token: ${{ secrets.GITHUB_TOKEN }}
          # è·å–å®Œæ•´å†å²è®°å½•
          fetch-depth: 0
      
      - name: ğŸ è®¾ç½® Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'
      
      - name: ğŸ“… æ˜¾ç¤ºæ‰§è¡Œä¿¡æ¯
        run: |
          echo "=========================================="
          echo "ğŸš€ å¼€å§‹è‡ªåŠ¨æäº¤éšæœºä»£ç "
          echo "=========================================="
          echo "è§¦å‘æ–¹å¼: ${{ github.event_name }}"
          echo "åˆ†æ”¯: ${{ github.ref }}"
          echo "æ‰§è¡Œè€…: ${{ github.actor }}"
          echo "=========================================="
      
      - name: âš™ï¸ æ‰§è¡Œè‡ªåŠ¨æäº¤è„šæœ¬
        run: python auto-commit.py
        env:
          # é…ç½® git ç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨äºæäº¤è®°å½•ï¼‰
          GIT_AUTHOR_NAME: 'GitHub Actions Bot'
          GIT_AUTHOR_EMAIL: 'action@github.com'
          GIT_COMMITTER_NAME: 'GitHub Actions Bot'
          GIT_COMMITTER_EMAIL: 'action@github.com'
      
      - name: âœ… ä»»åŠ¡å®Œæˆ
        run: |
          echo "=========================================="
          echo "âœ¨ è‡ªåŠ¨æäº¤ä»»åŠ¡å®Œæˆï¼"
          echo "=========================================="

