<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>LLMs | Pan Binghong's Tech Blog</title><meta name=keywords content><meta name=description content="è®°å½•æŠ€æœ¯æˆé•¿çš„æ¯ä¸€æ­¥ - AIã€åç«¯ã€DevOps å­¦ä¹ ç¬”è®°"><meta name=author content="Pan Binghong"><link rel=canonical href=https://Pan-Binghong.github.io/daily-learning/tags/llms/><link crossorigin=anonymous href=/daily-learning/assets/css/stylesheet.8c4274f6592e00e67f9d9e38f6a29695c6a6ce5eded446ed371ff6565dbb189f.css integrity="sha256-jEJ09lkuAOZ/nZ449qKWlcamzl7e1EbtNx/2Vl27GJ8=" rel="preload stylesheet" as=style><link rel=icon href=https://Pan-Binghong.github.io/daily-learning/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://Pan-Binghong.github.io/daily-learning/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://Pan-Binghong.github.io/daily-learning/favicon-32x32.png><link rel=apple-touch-icon href=https://Pan-Binghong.github.io/daily-learning/apple-touch-icon.png><link rel=mask-icon href=https://Pan-Binghong.github.io/daily-learning/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://Pan-Binghong.github.io/daily-learning/tags/llms/index.xml title=rss><link rel=alternate hreflang=en href=https://Pan-Binghong.github.io/daily-learning/tags/llms/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><link rel=stylesheet href=https://unpkg.com/github-calendar@latest/dist/github-calendar-responsive.css><style>.reading-progress-bar{position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,var(--primary),#00d4ff);z-index:9999;transition:width .1s ease;box-shadow:0 0 10px rgba(0,212,255,.5)}</style><script>document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})})})</script><meta property="og:url" content="https://Pan-Binghong.github.io/daily-learning/tags/llms/"><meta property="og:site_name" content="Pan Binghong's Tech Blog"><meta property="og:title" content="LLMs"><meta property="og:description" content="è®°å½•æŠ€æœ¯æˆé•¿çš„æ¯ä¸€æ­¥ - AIã€åç«¯ã€DevOps å­¦ä¹ ç¬”è®°"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="LLMs"><meta name=twitter:description content="è®°å½•æŠ€æœ¯æˆé•¿çš„æ¯ä¸€æ­¥ - AIã€åç«¯ã€DevOps å­¦ä¹ ç¬”è®°"></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://Pan-Binghong.github.io/daily-learning/ accesskey=h title="Pan Binghong's Tech Blog (Alt + H)">Pan Binghong's Tech Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://Pan-Binghong.github.io/daily-learning/ title="ğŸ  é¦–é¡µ"><span>ğŸ  é¦–é¡µ</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/ai/ title="ğŸ¤– AI"><span>ğŸ¤– AI</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/knowledge/ title="ğŸ“š çŸ¥è¯†åº“"><span>ğŸ“š çŸ¥è¯†åº“</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/backend/ title="âš™ï¸ åç«¯"><span>âš™ï¸ åç«¯</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/devops/ title="ğŸ”§ DevOps"><span>ğŸ”§ DevOps</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/other/ title="ğŸ“ å…¶ä»–"><span>ğŸ“ å…¶ä»–</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/search/ title="ğŸ” æœç´¢"><span>ğŸ” æœç´¢</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/tags/ title="ğŸ·ï¸ æ ‡ç­¾"><span>ğŸ·ï¸ æ ‡ç­¾</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/archives/ title="ğŸ“‚ å½’æ¡£"><span>ğŸ“‚ å½’æ¡£</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/about/ title="ğŸ‘¤ å…³äº"><span>ğŸ‘¤ å…³äº</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://Pan-Binghong.github.io/daily-learning/>Home</a>&nbsp;Â»&nbsp;<a href=https://Pan-Binghong.github.io/daily-learning/tags/>Tags</a></div><h1>LLMs
<a href=/daily-learning/tags/llms/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Ascendé•œåƒä»“åº“åœ°å€</h2></header><div class=entry-content><p>ğŸ’¡ æœ‰çš„æ—¶å€™ç»å¸¸æ‰¾ä¸åˆ°ï¼Œåœ¨è¿™é‡Œå­˜ä¸€ä¸‹ã€‚
https://www.hiascend.com/developer/ascendhub
References</p></div><footer class=entry-footer><span title='2025-11-19 08:54:00 +0000 UTC'>November 19, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>4 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to Ascendé•œåƒä»“åº“åœ°å€" href=https://Pan-Binghong.github.io/daily-learning/ai/ascend%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨Vllm-Ascendæ¨ç†Qwen3</h2></header><div class=entry-content><p>ğŸ’¡ ä½¿ç”¨vllm-ascendè¿›è¡Œæ¨ç†ï¼Œå¢åŠ é€Ÿåº¦ä¼˜åŒ–ï¼Œç¦ç”¨æ€è€ƒã€‚
1. æ‹‰å–é•œåƒ 1 docker pull quay.io/ascend/vllm-ascend:v0.11.0rc1 2. å¯åŠ¨å®¹å™¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 # Update the vllm-ascend image export IMAGE=quay.io/ascend/vllm-ascend:v0.11.0rc1 docker run --rm \ -d \ --name vllm-ascend \ --shm-size=1g \ --device /dev/davinci0 \ --device /dev/davinci1 \ --device /dev/davinci2 \ --device /dev/davinci3 \ --device /dev/davinci4 \ --device /dev/davinci5 \ --device /dev/davinci6 \ --device /dev/davinci7 \ --device /dev/davinci_manager \ --device /dev/devmm_svm \ --device /dev/hisi_hdc \ -v /usr/local/dcmi:/usr/local/dcmi \ -v /usr/local/bin/npu-smi:/usr/local/bin/npu-smi \ -v /usr/local/Ascend/driver/lib64/:/usr/local/Ascend/driver/lib64/ \ -v /usr/local/Ascend/driver/version.info:/usr/local/Ascend/driver/version.info \ -v /etc/ascend_install.info:/etc/ascend_install.info \ -v /root/.cache:/root/.cache \ -p 8000:8000 \ -it $IMAGE bash 3. é…ç½®ç¯å¢ƒ 1 2 3 4 5 6 7 8 9 10 export VLLM_USE_MODELSCOPE=True export PYTORCH_NPU_ALLOC_CONF=max_split_size_mb:256 export VLLM_ASCEND_ENABLE_DENSE_OPTIMIZE=1 export VLLM_ASCEND_ENABLE_FLASHCOMM=1 export VLLM_ASCEND_ENABLE_PREFETCH_MLP=1 export PYTORCH_NPU_ALLOC_CONF=expandable_segments:True export CPU_AFFINITY_CONF=1 # export TASK_QUEUE_ENABLE=2 unset TASK_QUEUE_ENABLE ç¦ç”¨æ€è€ƒ 4. å¯åŠ¨æœåŠ¡ 1 vllm serve Qwen/Qwen3-32B --tensor-parallel-size 4 --async-scheduling --chat-template ./qwen3_nonthinking.jinja 5. æµ‹è¯• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 #!/usr/bin/env python3 """ vLLM æ€§èƒ½æµ‹è¯•è„šæœ¬ - æ— éœ€ jq ä¾èµ– """ import subprocess import json import time import sys def call_vllm(prompt: str, max_tokens: int = 4096): """è°ƒç”¨ vLLM API å¹¶è®¡æ—¶""" url = "http://localhost:8000/v1/chat/completions" payload = { "model": "Qwen/Qwen3-32B", "messages": [{"role": "user", "content": prompt}], "temperature": 0.6, "max_tokens": max_tokens } print(f"ğŸ“¤ å‘é€è¯·æ±‚: {prompt[:50]}...") start_time = time.time() try: cmd = [ 'curl', '-s', '-H', 'Content-Type: application/json', '-d', json.dumps(payload), url ] result = subprocess.run(cmd, capture_output=True, text=True, timeout=300) if result.returncode != 0: print(f"âŒ curl æ‰§è¡Œå¤±è´¥: {result.stderr}") return None response = json.loads(result.stdout) duration = (time.time() - start_time) * 1000 if 'error' in response: print(f"âŒ API é”™è¯¯: {response['error']}") return None # æå–ä¿¡æ¯ usage = response.get('usage', {}) content = response['choices'][0]['message']['content'] prompt_tokens = usage.get('prompt_tokens', 0) completion_tokens = usage.get('completion_tokens', 0) # è®¡ç®—æŒ‡æ ‡ throughput = (completion_tokens / duration * 1000) if duration > 0 else 0 latency_per_token = duration / completion_tokens if completion_tokens > 0 else 0 # æ‰“å°æ€§èƒ½æŠ¥å‘Š print("\n" + "="*60) print("ğŸ“Š æ€§èƒ½æŒ‡æ ‡æŠ¥å‘Š") print("="*60) print(f"â±ï¸ æ€»è€—æ—¶: {duration:.2f}ms ({duration/1000:.2f}s)") print(f"ğŸ“¥ è¾“å…¥Tokens: {prompt_tokens}") print(f"ğŸ“¤ è¾“å‡ºTokens: {completion_tokens}") print(f"âš¡ ååé‡: {throughput:.2f} tokens/s") print(f"ğŸ¯ å»¶è¿Ÿ/Token: {latency_per_token:.2f} ms/token") print("="*60) print("\nğŸ“ å“åº”å†…å®¹ï¼ˆå‰ 200 å­—ç¬¦ï¼‰:") print("-" * 60) print(content[:200] + "..." if len(content) > 200 else content) print("-" * 60 + "\n") return { 'duration': duration, 'prompt_tokens': prompt_tokens, 'completion_tokens': completion_tokens, 'throughput': throughput, 'content': content } except subprocess.TimeoutExpired: print("âŒ è¯·æ±‚è¶…æ—¶ï¼ˆ300ç§’ï¼‰") return None except json.JSONDecodeError as e: print(f"âŒ JSON è§£æå¤±è´¥: {e}") print(f"å“åº”å†…å®¹: {result.stdout[:200]}") return None except Exception as e: print(f"âŒ å‘ç”Ÿé”™è¯¯: {e}") return None def benchmark(num_requests: int = 3): """è¿è¡Œå¤šæ¬¡è¯·æ±‚è¿›è¡ŒåŸºå‡†æµ‹è¯•""" print(f"\nğŸš€ å¼€å§‹åŸºå‡†æµ‹è¯• ({num_requests} ä¸ªè¯·æ±‚)\n") prompts = [ "Give me a short introduction to large language models.", "What are the main applications of artificial intelligence?", "Explain quantum computing in simple terms." ] results = [] for i, prompt in enumerate(prompts[:num_requests], 1): print(f"\n[è¯·æ±‚ {i}/{num_requests}]") result = call_vllm(prompt) if result: results.append(result) time.sleep(1) # è¯·æ±‚é—´éš” # æ±‡æ€»ç»Ÿè®¡ if results: print("\n" + "="*60) print("ğŸ“ˆ æ±‡æ€»ç»Ÿè®¡") print("="*60) durations = [r['duration'] for r in results] throughputs = [r['throughput'] for r in results] print(f"å¹³å‡è€—æ—¶: {sum(durations)/len(durations):.2f}ms") print(f"æœ€å°è€—æ—¶: {min(durations):.2f}ms") print(f"æœ€å¤§è€—æ—¶: {max(durations):.2f}ms") print(f"\nå¹³å‡ååé‡: {sum(throughputs)/len(throughputs):.2f} tokens/s") print(f"æœ€ä½ååé‡: {min(throughputs):.2f} tokens/s") print(f"æœ€é«˜ååé‡: {max(throughputs):.2f} tokens/s") print("="*60 + "\n") if __name__ == "__main__": # å•æ¬¡è°ƒç”¨ call_vllm("Give me a short introduction to large language models.") # æˆ–è€…è¿è¡ŒåŸºå‡†æµ‹è¯•ï¼ˆå–æ¶ˆæ³¨é‡Šä¸‹ä¸€è¡Œï¼‰ # benchmark(num_requests=3) References
...</p></div><footer class=entry-footer><span title='2025-11-13 06:10:00 +0000 UTC'>November 13, 2025</span>&nbsp;Â·&nbsp;<span>4 min</span>&nbsp;Â·&nbsp;<span>642 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to ä½¿ç”¨Vllm-Ascendæ¨ç†Qwen3" href=https://Pan-Binghong.github.io/daily-learning/ai/%E4%BD%BF%E7%94%A8vllm-ascend%E6%8E%A8%E7%90%86qwen3/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Difyè·å–ç”¨æˆ·çš„å¯¹è¯è®°å½•</h2></header><div class=entry-content><p>ğŸ’¡ ä»difyçš„æ•°æ®åº“ä¸­è·å–ç”¨æˆ·çš„å¯¹è¯è®°å½•ã€‚
è¿›å…¥postgreså®¹å™¨æ•°æ®åº“ æŸ¥çœ‹æ•°æ®è¡¨ æŸ¥çœ‹messageè¡¨çš„ç»“æ„ æŸ¥çœ‹æœ€æ–°çš„10æ¡å¯¹è¯è®°å½• copy å®¹å™¨åˆ°å®¿ä¸»æœº</p></div><footer class=entry-footer><span title='2025-09-02 08:58:00 +0000 UTC'>September 2, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>8 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to Difyè·å–ç”¨æˆ·çš„å¯¹è¯è®°å½•" href=https://Pan-Binghong.github.io/daily-learning/ai/dify%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E7%9A%84%E5%AF%B9%E8%AF%9D%E8%AE%B0%E5%BD%95/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>è§£å†³Dify Sandboxç¯å¢ƒæ— æ³•è®¿é—®ç½‘ç»œ</h2></header><div class=entry-content><p>ğŸ’¡ æƒ³è¦åœ¨Difyä¸­å®ç°ï¼Œä¸Šä¼ xlsxæ–‡ä»¶æˆ–è€…csvæ–‡ä»¶ï¼Œæœ€ç»ˆé€šè¿‡ä»£ç æ‰§è¡ŒèŠ‚ç‚¹ï¼Œå°†æ–‡ä»¶å†™å…¥åˆ°è¿œç¨‹æ•°æ®åº“å†…ã€‚è¸©å‘è®°å½•ã€‚
è§£å†³æ­¥éª¤ ç¼–è¾‘squid.confæ–‡ä»¶ å¢åŠ ä»¥ä¸‹å†…å®¹ åœ¨Sandboxä¸­å¢åŠ PySQLç­‰ä¾èµ– é‡å¯é¡¹ç›® é¢å¤–æ“ä½œ</p></div><footer class=entry-footer><span title='2025-08-28 09:20:00 +0000 UTC'>August 28, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>8 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to è§£å†³Dify Sandboxç¯å¢ƒæ— æ³•è®¿é—®ç½‘ç»œ" href=https://Pan-Binghong.github.io/daily-learning/ai/%E8%A7%A3%E5%86%B3dify-sandbox%E7%8E%AF%E5%A2%83%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E7%BD%91%E7%BB%9C/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Difyä½¿ç”¨httpæ¨¡å—403æŠ¥é”™</h2></header><div class=entry-content><p>ğŸ’¡ è§£å†³æŠ¥é”™è®°å½•
è¿›å…¥cd /home/xxx/dify/docker/ssrf_proxy ç¼–è¾‘æ–‡ä»¶ï¼Œæ³¨é‡Š</p></div><footer class=entry-footer><span title='2025-08-22 06:36:00 +0000 UTC'>August 22, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>5 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to Difyä½¿ç”¨httpæ¨¡å—403æŠ¥é”™" href=https://Pan-Binghong.github.io/daily-learning/ai/dify%E4%BD%BF%E7%94%A8http%E6%A8%A1%E5%9D%97403%E6%8A%A5%E9%94%99/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Difyæ’ä»¶ä¹‹MineU2ä½¿ç”¨è¸©å‘</h2></header><div class=entry-content><p>ğŸ’¡ MineU 2åœ¨Difyæ’ä»¶ä¸­ä½¿ç”¨è¿‡ç¨‹ä¸­çš„è¸©å‘è®°å½•ã€‚
1. å®‰è£… https://marketplace.dify.ai/plugins/langgenius/mineru?source=http%253A%252F%252F172.16.0.138%253A9001&amp;language=zh-Hans&amp;theme=light
2. é…ç½® è·å–API KEY | åœ¨å®˜ç½‘ç”³è¯·å³å¯ å¡«å…¥é…ç½® Detail è¸©å‘ è§£å†³æ–¹æ³• References</p></div><footer class=entry-footer><span title='2025-08-19 05:24:00 +0000 UTC'>August 19, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>17 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to Difyæ’ä»¶ä¹‹MineU2ä½¿ç”¨è¸©å‘" href=https://Pan-Binghong.github.io/daily-learning/ai/dify%E6%8F%92%E4%BB%B6%E4%B9%8Bmineu2%E4%BD%BF%E7%94%A8%E8%B8%A9%E5%9D%91/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Difyä¿®æ”¹SandBoxæƒé™</h2></header><div class=entry-content><p>ğŸ’¡ ä½¿ç”¨difyçš„ä»£ç æ‰§è¡Œæ¨¡å—æ—¶, å¯¼å…¥äº†ç¬¬ä¸‰æ–¹åº“, ä½†æ˜¯åœ¨è¿è¡Œæ—¶å‡ºç°: operation not permitted
ä¿®æ”¹æ–‡ä»¶ æ”¹æˆè¿™æ ·</p></div><footer class=entry-footer><span title='2025-08-15 08:59:00 +0000 UTC'>August 15, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>9 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to Difyä¿®æ”¹SandBoxæƒé™" href=https://Pan-Binghong.github.io/daily-learning/ai/dify%E4%BF%AE%E6%94%B9sandbox%E6%9D%83%E9%99%90/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Difyä¿®æ”¹é»˜è®¤80ç«¯å£</h2></header><div class=entry-content><p>ğŸ’¡ è®°å½•Difyä¿®æ”¹ç«¯å£çš„æ“ä½œ
æ“ä½œæµç¨‹ è¿›å…¥dify/dockerç›®å½• è¿›å…¥.envæ–‡ä»¶ ä¿®æ”¹ç«¯å£80</p></div><footer class=entry-footer><span title='2025-08-15 01:24:00 +0000 UTC'>August 15, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>6 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to Difyä¿®æ”¹é»˜è®¤80ç«¯å£" href=https://Pan-Binghong.github.io/daily-learning/ai/dify%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A480%E7%AB%AF%E5%8F%A3/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Difyä¸­å®‰è£…é¢å¤–çš„PipåŒ…</h2></header><div class=entry-content><p>ğŸ’¡ æœ€è¿‘éœ€è¦åœ¨difyçš„ä»£ç æ‰§è¡Œæ¨¡å—ä¸­è¿è¡Œpython-docxåº“çš„åŠŸèƒ½ã€‚è®°å½•ä¸€ä¸‹æ€ä¹ˆåœ¨difyä¸­å®‰è£…é¢å¤–çš„åŒ…ã€‚
1. æ‰¾åˆ°requirements åœ¨ /data/dify/docker/volumes/sandbox/dependencies/python-requirements.txt æ–‡ä»¶ä¸­æ·»åŠ éœ€è¦å®‰è£…çš„åŒ…çš„åç§°ä»¥åŠç‰ˆæœ¬å³å¯ã€‚
2. é‡å¯docker 1 docker compose restart</p></div><footer class=entry-footer><span title='2025-08-12 06:08:00 +0000 UTC'>August 12, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>13 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to Difyä¸­å®‰è£…é¢å¤–çš„PipåŒ…" href=https://Pan-Binghong.github.io/daily-learning/ai/dify%E4%B8%AD%E5%AE%89%E8%A3%85%E9%A2%9D%E5%A4%96%E7%9A%84pip%E5%8C%85/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>åŸºäºvllm benchmarkå¢åŠ å›¾ç‰‡å‹æµ‹åŠŸèƒ½</h2></header><div class=entry-content><p>ğŸ’¡ æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæƒ³è¦åœ¨æ€§èƒ½å‹æµ‹çš„åŸæ¨¡å¼ä¸­ï¼Œå¢åŠ å¤šæ¨¡æ€æ¨¡å‹çš„å‹æµ‹èƒ½åŠ›ã€‚ä»¥ä¸‹è®°å½•ä¿®æ”¹ä»£ç çš„å…¨è¿‡ç¨‹ä»¥åŠè¸©å‘è®°å½•ã€‚
1. ä»£ç å¯¹æ¯” åŸå§‹ä»£ç ä¸ºvllmå¼€æºä»“åº“å†…/benckmarks/backend_request_func.py å’Œ /benchmarks/benchmark_serving.py ï¼Œä¸»è¦ä¿®æ”¹éƒ¨åˆ†ä¸ºï¼š
benckmark_serving.py
parserä¸­æ–°å¢å‚æ•° image-url 1 2 3 4 5 6 parser.add_argument( "--image-url", type=str, default=None, help="URL of a fixed image to be included in every request when using --dataset-name random." ) mainå‡½æ•°å¤„æ–°å¢ 1 2 3 4 endpoint = args.endpoint if endpoint == parser.get_default("endpoint") and backend in ("openai-chat-vl" ): endpoint = "/v1/chat/completions" print(f"Using default endpoint for {backend}: {endpoint}") mainå‡½æ•°å¤„æ–°å¢ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 elif args.dataset_name == "random": input_requests = sample_random_requests( prefix_len=args.random_prefix_len, input_len=args.random_input_len, output_len=args.random_output_len, num_prompts=args.num_prompts, range_ratio=args.random_range_ratio, tokenizer=tokenizer, image_url=args.image_url, ) # Add check: if image_url is used, backend must support multi-modal if args.image_url and args.backend not in ("openai-chat", ): raise ValueError( f"Using --image-url requires a multi-modal backend ('openai-chat' or 'openai-image'), but got {args.backend}." ) else: raise ValueError(f"Unknown dataset: {args.dataset_name}") åœ¨benchmarkå‡½æ•°å¤„ä¿®æ”¹ 1 2 3 4 if backend not in ("openai-chat-vl" ) and test_mm_content is not None: raise ValueError( f"Multi-modal content is only supported on 'openai-chat' or 'openai-image' backend, but got {backend}." ) åœ¨sample_random_requestsæ–°å¢ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 def sample_random_requests( prefix_len: int, input_len: int, output_len: int, num_prompts: int, range_ratio: float, tokenizer: PreTrainedTokenizerBase, image_url: Optional[str] = None, ) -> List[Tuple[str, int, int, Optional[Dict[str, Collection[str]]]]]: prefix_token_ids = np.random.randint(0, tokenizer.vocab_size, size=prefix_len).tolist() # range_ratio ç”¨äºæ§åˆ¶ç”Ÿæˆçš„éšæœºè¾“å…¥é•¿åº¦çš„èŒƒå›´ # ä¾‹å¦‚ input_len=100, range_ratio=0.8 æ—¶: # ç”Ÿæˆçš„éšæœºé•¿åº¦èŒƒå›´ä¸º [80, 100] # è¿™æ ·å¯ä»¥äº§ç”Ÿä¸€å®šå˜åŒ–èŒƒå›´çš„è¾“å…¥é•¿åº¦,è€Œä¸æ˜¯å›ºå®šé•¿åº¦ input_lens = np.random.randint( int(input_len * range_ratio), # ä¸‹é™æ˜¯ input_len * range_ratio input_len + 1, # ä¸Šé™æ˜¯ input_len size=num_prompts, # ç”Ÿæˆ num_prompts ä¸ªéšæœºé•¿åº¦ ) output_lens = np.random.randint( int(output_len * range_ratio), output_len + 1, size=num_prompts, ) offsets = np.random.randint(0, tokenizer.vocab_size, size=num_prompts) input_requests = [] # Prepare mm_content if image_url is provided mm_content = None if image_url: mm_content = { "type": "image_url", "image_url": { "url": image_url }, } for i in range(num_prompts): # ç”Ÿæˆéšæœºtokenåºåˆ—: # 1. å…ˆæ·»åŠ å›ºå®šçš„prefix_token_ids # 2. å†æ·»åŠ éšæœºç”Ÿæˆçš„token_ids: # - ä»offset[i]å¼€å§‹ # - æ¯ä¸ªä½ç½®jå¢åŠ i+j # - å¯¹vocab_sizeå–æ¨¡ç¡®ä¿åœ¨è¯è¡¨èŒƒå›´å†… token_ids = prefix_token_ids + [(offsets[i] + i + j) % tokenizer.vocab_size for j in range(input_lens[i])] # 3. è§£ç æˆæ–‡æœ¬ prompt = tokenizer.decode(token_ids, skip_special_tokens=True) # 4. é‡æ–°ç¼–ç å¹¶æˆªæ–­åˆ°æŒ‡å®šé•¿åº¦ prompt = tokenizer.decode( tokenizer.encode(prompt, truncation=True, max_length=input_lens[i]), skip_special_tokens=True ) prompt_len = len(tokenizer.encode(prompt)) input_requests.append((prompt, prompt_len, int(output_lens[i]), mm_content)) # æ‰“å°æ¯è¡Œçš„é•¿åº¦ print(f"Request {i}: Input length = {prompt_len}, Output length = {output_lens[i]}") return input_requests backend_request_func.py ä¸»è¦ä¿®æ”¹éƒ¨åˆ†ä¸ºï¼š
...</p></div><footer class=entry-footer><span title='2025-04-27 06:59:00 +0000 UTC'>April 27, 2025</span>&nbsp;Â·&nbsp;<span>3 min</span>&nbsp;Â·&nbsp;<span>432 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to åŸºäºvllm benchmarkå¢åŠ å›¾ç‰‡å‹æµ‹åŠŸèƒ½" href=https://Pan-Binghong.github.io/daily-learning/ai/%E5%9F%BA%E4%BA%8Evllm-benchmark%E5%A2%9E%E5%8A%A0%E5%9B%BE%E7%89%87%E5%8E%8B%E6%B5%8B%E5%8A%9F%E8%83%BD/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://Pan-Binghong.github.io/daily-learning/tags/llms/page/2/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://Pan-Binghong.github.io/daily-learning/>Pan Binghong's Tech Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg></a><div class=reading-progress-bar id=reading-progress></div><script>window.addEventListener("scroll",function(){const e=document.getElementById("reading-progress");if(!e)return;const t=window.innerHeight,n=document.documentElement.scrollHeight-t,s=window.scrollY,o=s/n*100;e.style.width=o+"%"}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".copy-text");e.forEach(e=>{e.addEventListener("click",function(){this.textContent="âœ“ å·²å¤åˆ¶",setTimeout(()=>{this.textContent="å¤åˆ¶"},2e3)})})}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll('a[href^="http"]');e.forEach(e=>{e.hostname!==window.location.hostname&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".post-content img");e.forEach(e=>{e.style.cursor="pointer",e.addEventListener("click",function(){window.open(this.src,"_blank")})})})</script><style>#top-link{transition:all .3s ease}#top-link:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.2)}</style><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>