<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Knowledge | Pan Binghong's Tech Blog</title><meta name=keywords content><meta name=description content="è®°å½•æŠ€æœ¯æˆé•¿çš„æ¯ä¸€æ­¥ - AIã€åç«¯ã€DevOps å­¦ä¹ ç¬”è®°"><meta name=author content="Pan Binghong"><link rel=canonical href=https://Pan-Binghong.github.io/daily-learning/tags/knowledge/><link crossorigin=anonymous href=/daily-learning/assets/css/stylesheet.8c4274f6592e00e67f9d9e38f6a29695c6a6ce5eded446ed371ff6565dbb189f.css integrity="sha256-jEJ09lkuAOZ/nZ449qKWlcamzl7e1EbtNx/2Vl27GJ8=" rel="preload stylesheet" as=style><link rel=icon href=https://Pan-Binghong.github.io/daily-learning/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://Pan-Binghong.github.io/daily-learning/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://Pan-Binghong.github.io/daily-learning/favicon-32x32.png><link rel=apple-touch-icon href=https://Pan-Binghong.github.io/daily-learning/apple-touch-icon.png><link rel=mask-icon href=https://Pan-Binghong.github.io/daily-learning/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://Pan-Binghong.github.io/daily-learning/tags/knowledge/index.xml title=rss><link rel=alternate hreflang=en href=https://Pan-Binghong.github.io/daily-learning/tags/knowledge/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><link rel=stylesheet href=https://unpkg.com/github-calendar@latest/dist/github-calendar-responsive.css><style>.reading-progress-bar{position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,var(--primary),#00d4ff);z-index:9999;transition:width .1s ease;box-shadow:0 0 10px rgba(0,212,255,.5)}</style><script>document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})})})</script><meta property="og:url" content="https://Pan-Binghong.github.io/daily-learning/tags/knowledge/"><meta property="og:site_name" content="Pan Binghong's Tech Blog"><meta property="og:title" content="Knowledge"><meta property="og:description" content="è®°å½•æŠ€æœ¯æˆé•¿çš„æ¯ä¸€æ­¥ - AIã€åç«¯ã€DevOps å­¦ä¹ ç¬”è®°"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Knowledge"><meta name=twitter:description content="è®°å½•æŠ€æœ¯æˆé•¿çš„æ¯ä¸€æ­¥ - AIã€åç«¯ã€DevOps å­¦ä¹ ç¬”è®°"></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://Pan-Binghong.github.io/daily-learning/ accesskey=h title="Pan Binghong's Tech Blog (Alt + H)">Pan Binghong's Tech Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://Pan-Binghong.github.io/daily-learning/ title="ğŸ  é¦–é¡µ"><span>ğŸ  é¦–é¡µ</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/ai/ title="ğŸ¤– AI"><span>ğŸ¤– AI</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/knowledge/ title="ğŸ“š çŸ¥è¯†åº“"><span>ğŸ“š çŸ¥è¯†åº“</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/backend/ title="âš™ï¸ åç«¯"><span>âš™ï¸ åç«¯</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/devops/ title="ğŸ”§ DevOps"><span>ğŸ”§ DevOps</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/other/ title="ğŸ“ å…¶ä»–"><span>ğŸ“ å…¶ä»–</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/search/ title="ğŸ” æœç´¢"><span>ğŸ” æœç´¢</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/tags/ title="ğŸ·ï¸ æ ‡ç­¾"><span>ğŸ·ï¸ æ ‡ç­¾</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/archives/ title="ğŸ“‚ å½’æ¡£"><span>ğŸ“‚ å½’æ¡£</span></a></li><li><a href=https://Pan-Binghong.github.io/daily-learning/about/ title="ğŸ‘¤ å…³äº"><span>ğŸ‘¤ å…³äº</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://Pan-Binghong.github.io/daily-learning/>Home</a>&nbsp;Â»&nbsp;<a href=https://Pan-Binghong.github.io/daily-learning/tags/>Tags</a></div><h1>Knowledge
<a href=/daily-learning/tags/knowledge/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>å¤§æ¨¡å‹è®­ç»ƒ_RLHF</h2></header><div class=entry-content><p>ğŸ’¡
Reference</p></div><footer class=entry-footer><span title='2025-04-28 08:56:00 +0000 UTC'>April 28, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>2 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to å¤§æ¨¡å‹è®­ç»ƒ_RLHF" href=https://Pan-Binghong.github.io/daily-learning/knowledge/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83_rlhf/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>å¤§æ¨¡å‹è®­ç»ƒ_æ•°æ®å¤„ç†åŠæ•°æ®é›†</h2></header><div class=entry-content><p>ğŸ’¡ åŸºäºllama-factoryã€swiftçš„æ•°æ®å¤„ç†éƒ¨åˆ†ï¼Œè‡ªå·±è®°å½•å¹¶å­¦ä¹ å¤§æ¨¡å‹è®­ç»ƒçš„æ•°æ®æ ¼å¼ã€‚
æœ¬å¸–å­æ ¹æ®https://llamafactory.readthedocs.io/zh-cn/latest/getting_started/data_preparation.html åŠ https://gitee.com/ascend/MindSpeed-LLM#%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86ï¼Œç²¾è¯»åæŒ‰ç…§ä¸ªäººçš„ç†è§£è¿›è¡Œè®°å½•å­¦ä¹ ã€‚
1. ä»»åŠ¡åœºæ™¯ æ ¹æ®ä¸åŒçš„è®­ç»ƒä»»åŠ¡åœºæ™¯ï¼Œæ•°æ®é›†æ ¼å¼ä¹Ÿä¸åŒã€‚
é¢„è®­ç»ƒ å¾®è°ƒ äººç±»åå¥½å¯¹é½è®­ç»ƒ å¤šæ¨¡æ€ 2. é¢„è®­ç»ƒ é¢„è®­ç»ƒçš„å¼€æºæ•°æ®é›†ä¸»æµçš„æœ‰alpacaæ•°æ®é›†ï¼Œenwikiæ•°æ®é›†ï¼Œchinesewebtextç­‰ã€‚
æ ¼å¼ 1 2 3 4 5 # data.json [ {"text": "document"}, {"text": "document"} ] alpacaæ•°æ®é›† https://huggingface.co/datasets/tatsu-lab/alpaca
è¯¥æ•°æ®é›†åŒ…å«é¢„è®­ç»ƒæ•°æ®ä»¥åŠå¾®è°ƒæ•°æ®ã€‚æ•°æ®é›†å…±æœ‰52kæ¡æ–‡æœ¬æ•°æ®ï¼Œæ–‡ä»¶å¤§å°ä¸º24.2MBã€‚å–å‡ºçœŸå®çš„ä¸€æ¡æ•°æ®å±•ç¤ºï¼š
1 2 3 4 5 6 { "instruction": "Create a classification task by clustering the given list of items.", "input": "Apples, oranges, bananas, strawberries, pineapples", "output": "Class 1: Apples, Oranges\nClass 2: Bananas, Strawberries\nClass 3: Pineapples", "text": "Below is an instruction that describes a task, paired with an input that provides further context. Write a response that appropriately completes the request.\n\n### Instruction:\nCreate a classification task by clustering the given list of items.\n\n### Input:\nApples, oranges, bananas, strawberries, pineapples\n\n### Response:\nClass 1: Apples, Oranges\nClass 2: Bananas, Strawberries\nClass 3: Pineapples", } 3. å¾®è°ƒ å¾®è°ƒä»»åŠ¡æ˜¯ç›®å‰æœ€å¸¸è§ä»¥åŠå¸¸ç”¨çš„ä»»åŠ¡ï¼Œå½“è®­ç»ƒä»»åŠ¡ä¸ºå¾®è°ƒæ—¶ï¼Œç›®å‰æœ‰2ç§ä¸»æµçš„æ•°æ®é›†æ ¼å¼ã€‚alpacaå’Œsharegptã€‚
...</p></div><footer class=entry-footer><span title='2025-04-28 03:00:00 +0000 UTC'>April 28, 2025</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>311 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to å¤§æ¨¡å‹è®­ç»ƒ_æ•°æ®å¤„ç†åŠæ•°æ®é›†" href=https://Pan-Binghong.github.io/daily-learning/knowledge/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83_%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%8F%8A%E6%95%B0%E6%8D%AE%E9%9B%86/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>å¤§æ¨¡å‹å…¨å®¶æ¡¶</h2></header><div class=entry-content><p>ğŸ’¡ è®°å½•å„ä¸ªå¤§æ¨¡å‹ï¼Œä»æ¯ä¸ªå¤§æ¨¡å‹çš„å‘å¸ƒæ—¶é—´ï¼Œç‰ˆæœ¬ï¼Œæƒé‡åœ°å€ï¼Œç›¸å…³è®ºæ–‡ï¼Œæ¶æ„ç‰¹ç‚¹ç­‰ã€‚
Reference</p></div><footer class=entry-footer><span title='2025-03-24 16:02:00 +0000 UTC'>March 24, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>3 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to å¤§æ¨¡å‹å…¨å®¶æ¡¶" href=https://Pan-Binghong.github.io/daily-learning/knowledge/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%85%A8%E5%AE%B6%E6%A1%B6/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>å¤§æ¨¡å‹æ¨ç†</h2></header><div class=entry-content><p>ğŸ’¡
1. LLM æ¨ç†è¿‡ç¨‹ Prefill Decoding è‡ªå›å½’çš„éšæ‚£:åœ¨Decodingé˜¶æ®µï¼Œå¦‚æœç”Ÿæˆå¤§é‡Tokençš„æƒ…å†µï¼Œè®¡ç®—é‡å¢å¤§ï¼Œä½†æ˜¯ä»é‡‡ç”¨ä¸²è¡Œç­–ç•¥ï¼Œå°±ä¼šäº§ç”Ÿç“¶é¢ˆã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œå¼•å‡ºKV Cacheã€‚
2. KV Cache æ¥ä¸Šé¢çš„é—®é¢˜ï¼Œæ€ä¹ˆä¸²è¡Œï¼Ÿ
KV CacheåŸç† 3. ç“¶é¢ˆåˆ†æ Prefillé˜¶æ®µå±äºè®¡ç®—å¯†é›†å‹ä»»åŠ¡|Computer Bound
Decodingé˜¶æ®µå±äºå†…å­˜å¯†é›†ä»»åŠ¡|Memory Bound
4. æ¨ç†æ¡†æ¶ TGI|Text Generation Inference vLLM SGLang LLMDeploy MindIE TensorRT-LLM é—®é¢˜ï¼š ä¸ºä»€ä¹ˆæœ‰KVCacheï¼Œæ²¡æœ‰QCacheï¼Ÿ Reference</p></div><footer class=entry-footer><span title='2025-03-20 07:00:00 +0000 UTC'>March 20, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>33 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to å¤§æ¨¡å‹æ¨ç†" href=https://Pan-Binghong.github.io/daily-learning/knowledge/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%8E%A8%E7%90%86/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ä»€ä¹ˆæ˜¯å¤§æ¨¡å‹ç²¾åº¦ï¼Ÿ</h2></header><div class=entry-content><p>ğŸ’¡ ç®€å•è®°å½•å¹¶è¯¦ç»†å­¦ä¹ ç²¾åº¦çš„æ¦‚å¿µï¼Œå«å¤§æ¨¡å‹ç›¸å…³çš„å„ä¸ªç²¾åº¦ã€‚å¦‚ä½•åŸºäºè¿™äº›ç²¾åº¦è¿›è¡Œè®¡ç®—ï¼Œä»¥åŠç®—åŠ›å¡æ”¯æŒç²¾åº¦ç›¸å…³æ¦‚å¿µã€‚
æ¦‚å¿µ ä»€ä¹ˆæ˜¯ç²¾åº¦ åœ¨è®¡ç®—æœºå­˜å‚¨å’Œè®¡ç®—ä¸­ï¼Œç²¾åº¦é€šå¸¸è¡¨ç¤ºæ•°æ®ç±»å‹èƒ½è¡¨ç¤ºçš„æ•°å€¼èŒƒå›´å’Œç»†ç²’åº¦ã€‚
å¸¸è§çš„ç²¾åº¦ ä¸€èˆ¬è®­ç»ƒç”¨BF16,æ¨ç†ç”¨FP16ã€‚DeepSeeké‡‡ç”¨FP8ã€‚
è¿›é˜¶ Floating Pointï¼Œæ˜¯æœ€åŸå§‹çš„ï¼ŒIEEEå®šä¹‰çš„æ ‡å‡†æµ®ç‚¹æ•°ã€‚ç”±ç¬¦å·ä½ï¼ˆsignï¼‰ã€æŒ‡æ•°ä½ï¼ˆexponentï¼‰ã€å°æ•°ä½ï¼ˆfractionï¼‰ç»„æˆã€‚
ä¾‹å­ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š
è“è‰²éƒ¨åˆ†è¡¨ç¤ºè¯¥æ•°å­—ä¸ºæ­£æ•°è¿˜æ˜¯è´Ÿæ•°ï¼ˆ0è¡¨ç¤ºæ­£æ•°ã€1è¡¨ç¤ºè´Ÿæ•°ï¼‰ ç»¿è‰²éƒ¨åˆ†8ä½ï¼Œè¡¨ç¤ºæ•´æ•°éƒ¨åˆ†ï¼Œæ˜¯ä¸€ç»„äºŒè¿›åˆ¶æ•°å­—ä»¥2ä¸ºåº•æ•°çš„æŒ‡æ•°ã€‚ ç´«è‰²éƒ¨åˆ†è¡¨ç¤ºå°æ•°éƒ¨åˆ†ï¼Œå³å°æ•°ç‚¹åçš„å€¼ã€‚ å¸¸è§ç²¾åº¦è¯¦ç»†å±•å¼€ FP64 FP32 FP16 BF16 TF32 ä»£ç  æ‹“å±• é‡åŒ– ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç²¾åº¦è¶Šä½ï¼Œæ¨ç†å†…å­˜å ç”¨è¶Šå°‘ï¼Œä¸ºäº†å°½å¯èƒ½çš„å‡å°‘èµ„æºå ç”¨ï¼Œé‡åŒ–ç®—æ³•è¢«å‘æ˜ã€‚FP32å ç”¨4ä¸ªå­—èŠ‚ï¼Œé‡åŒ–ä¸º8ä½ï¼Œåªéœ€è¦1ä¸ªå­—èŠ‚ã€‚
é‡åŒ–æ–¹æ³• ğŸ’¡ æŸ¥äº†ä¸€ä¸‹èµ„æ–™å‘ç°ï¼Œæ–¹æ³•æœ‰ç‚¹å¤šã€‚å®ç”¨æ€§å¼ºçš„æœ‰W8A8å’ŒW4A16ï¼Œå…·ä½“ç»†èŠ‚æ‰“ç®—é‡æ–°å¼€å¸–å­äº†ã€‚è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹é‡åŒ–æ¦‚å¿µå§ã€‚
LLMä¸­çš„3ä¸ªé‡åŒ–æ–¹å‘ æƒé‡é‡åŒ– æƒé‡æ¿€æ´»é‡åŒ– KV cacheé‡åŒ– æƒé‡é‡åŒ–æ–¹æ³• ç®—åŠ›å¡ä¸ç²¾åº¦ ç»Ÿè®¡å¸‚é¢ä¸Šå¸¸ç”¨çš„ç®—åŠ›å¡ç™½çš®ä¹¦ã€‚å°†æ”¯æŒç‰¹æ®Šç²¾åº¦è¿›è¡Œè®°å½•ã€‚è‹±ä¼Ÿè¾¾ç®—åŠ›å¡Hopperç³»åˆ—å‡å…¼å®¹FP64/FP8ã€‚
A100 æ”¯æŒFP64
H100 æ”¯æŒFP64/FP8
A800 æ”¯æŒFP64
MI300A æ”¯æŒFP64/FP8
MI300X æ”¯æŒFP64/FP8
ç®€å•è®¡ç®— 1000ä¸ªè‹±æ–‡å­—ç¬¦å å¤šå°‘å¤§å°ï¼Ÿ Reference</p></div><footer class=entry-footer><span title='2025-03-17 02:31:00 +0000 UTC'>March 17, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>49 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to ä»€ä¹ˆæ˜¯å¤§æ¨¡å‹ç²¾åº¦ï¼Ÿ" href=https://Pan-Binghong.github.io/daily-learning/knowledge/%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%B2%BE%E5%BA%A6/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ç½‘ç»œå¼€å‘ä¸ç½‘ç»œå®‰å…¨ç®¡ç†åŸ¹è®­è¯•é¢˜</h2></header><div class=entry-content><p></p></div><footer class=entry-footer><span title='2025-03-17 01:30:00 +0000 UTC'>March 17, 2025</span>&nbsp;Â·&nbsp;<span>0 min</span>&nbsp;Â·&nbsp;<span>0 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to ç½‘ç»œå¼€å‘ä¸ç½‘ç»œå®‰å…¨ç®¡ç†åŸ¹è®­è¯•é¢˜" href=https://Pan-Binghong.github.io/daily-learning/knowledge/%E7%BD%91%E7%BB%9C%E5%BC%80%E5%8F%91%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E5%9F%B9%E8%AE%AD%E8%AF%95%E9%A2%98/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>å¤§æ¨¡å‹æ€§èƒ½æŒ‡æ ‡ä¹‹æ¨ç†é€Ÿåº¦</h2></header><div class=entry-content><p>ğŸ’¡ åŸºäºvllmä»“åº“ä¸­çš„benchmark_serving.py ï¼Œå­¦ä¹ å¹¶ç†è§£å…³äºæ¨ç†é€Ÿåº¦çš„æŒ‡æ ‡ã€‚
Benchmarkç»“æœæ€»è§ˆ ä»¥ä¸Šæˆªå›¾è¡¨ç¤ºï¼š æ¨¡å‹DeepSeek-R1-Distill-Llama-70B è®¾å®šè¾“å…¥token128ï¼Œè¾“å‡ºtoken2000 ï¼Œ1å¹¶å‘çš„åŸºå‡†æµ‹è¯•ç»“æœã€‚
TTFT(Time To First Token) å«ä¹‰: ç”¨æˆ·å‘é€Queryåˆ°æ¨¡å‹ç”Ÿæˆç¬¬ä¸€ä¸ªè¾“å‡ºTokenæ‰€éœ€çš„æ—¶é—´ã€‚å•ä½ä¸€èˆ¬ç”¨æ¯«ç§’/ç§’è¡¨ç¤ºã€‚ è®¡ç®—: TPOT(Time per Output Token) å«ä¹‰: ç”Ÿæˆæ¯ä¸ªè¾“å‡ºtokenæ‰€éœ€çš„æ—¶é—´ï¼Œä¸åŒ…å«é¦–tokençš„ç”Ÿæˆæ—¶é—´ã€‚ è®¡ç®—: è¡¥å……è¯´æ˜:
Request Throughput å«ä¹‰: æ•´ä½“æµ‹è¯•è¿‡ç¨‹çš„æ¯ç§’è¯·æ±‚æ•°ï¼Œååé‡æŒ‡æ ‡ã€‚å•ä½ï¼ˆreq/sï¼‰ã€‚ è®¡ç®—: Output Token Throughput å«ä¹‰: è¾“å‡ºtokençš„ååé‡ã€‚ è®¡ç®—: Total Token Throughput å«ä¹‰: æ€»tokenååé‡ï¼ŒåŒ…å«è¾“å…¥tokenã€‚ è®¡ç®—: GenerateSpeedPerClient å«ä¹‰: æ•´ä½“çš„tokenç”Ÿæˆé€Ÿåº¦/æµ‹è¯•å¹¶å‘æ•°ã€‚å•ä½ï¼ˆtoken/sï¼‰ã€‚ è®¡ç®—: Reference</p></div><footer class=entry-footer><span title='2025-03-04 06:05:00 +0000 UTC'>March 4, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>45 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to å¤§æ¨¡å‹æ€§èƒ½æŒ‡æ ‡ä¹‹æ¨ç†é€Ÿåº¦" href=https://Pan-Binghong.github.io/daily-learning/knowledge/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87%E4%B9%8B%E6%8E%A8%E7%90%86%E9%80%9F%E5%BA%A6/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>LinuxåŸºç¡€çŸ¥è¯†åŠæ“ä½œ</h2></header><div class=entry-content><p>ğŸ’¡ Linuxæ“ä½œç³»ç»Ÿä¸­æ–‡ä»¶ä¸ç›®å½•ç›¸å…³çš„çŸ¥è¯†ã€‚
1.Linuxæ–‡ä»¶åŸºæœ¬å±æ€§ åœ¨Linuxä¸­é€šå¸¸ä½¿ç”¨chown å’Œchmod ä¿®æ”¹æ–‡ä»¶æˆ–è€…ç›®å½•æ‰€å±ç”¨æˆ·ä¸æƒé™:
chown ä¿®æ”¹æ‰€å±ç”¨æˆ·ä¸ç»„ã€‚ chmod ä¿®æ”¹ç”¨æˆ·çš„æƒé™ã€‚ ä¸Šå›¾è¡¨ç¤ºï¼Œé€šè¿‡chownæ¥æˆæƒç”¨æˆ·ï¼Œé€šè¿‡chmodä¸ºç”¨æˆ·è®¾ç½®å¯ä»¥å¼€é—¨çš„æƒé™ã€‚ åœ¨Linuxä¸­é€šå¸¸ä½¿ç”¨llæˆ–è€…ls -lå‘½ä»¤æ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„å±æ€§ä»¥åŠæ–‡ä»¶æ‰€å±çš„ç”¨æˆ·å’Œç»„:
ä»¥ä¸Šæ¡ˆä¾‹ä¸­ï¼Œmain.pyæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªå±æ€§- è¡¨ç¤ºä¸ºæ–‡ä»¶ã€‚
æ¥ä¸‹æ¥çš„å­—ç¬¦ä¸­ï¼Œä»¥3ä¸ªä¸ºä¸€ç»„ï¼Œä¸”å‡ä¸ºrwxçš„ä¸‰ä¸ªå‚æ•°çš„ç»„åˆã€‚
Linuxæ–‡ä»¶å±ä¸»å’Œå±ç»„ å¯¹äºæ–‡ä»¶æ¥è¯´ï¼Œå®ƒéƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„æ‰€æœ‰è€…ï¼Œä¹Ÿå°±æ˜¯å¯¹è¯¥æ–‡ä»¶å…·æœ‰æ‰€æœ‰æƒçš„ç”¨æˆ·ã€‚ æ–‡ä»¶æ‰€æœ‰è€…ä»¥å¤–çš„ç”¨æˆ·åˆå¯ä»¥åˆ†ä¸ºæ–‡ä»¶æ‰€å±ç»„çš„åŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·ã€‚ æ›´æ”¹æ–‡ä»¶å±æ€§ chgrp æ›´æ”¹æ–‡ä»¶å±ç»„ chown æ›´æ”¹æ–‡ä»¶æ‰€æœ‰è€…(owner)ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ›´æ”¹æ–‡ä»¶å±ç»„ chmod æ›´æ”¹æ–‡ä»¶9ä¸ªå±æ€§ Linuxé“¾æ¥æ¦‚å¿µ Linuxé“¾æ¥åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§è¢«ç§°ä¸ºç¡¬é“¾æ¥(Hard Link)ï¼Œå¦ä¸€ç§è¢«ç§°ä¸ºè½¯é“¾æ¥(Symbolic Link)ã€‚
ç¡¬é“¾æ¥ è½¯é“¾æ¥ å®éªŒ 2.Linuxæ–‡ä»¶ä¸ç›®å½•ç®¡ç† å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤ æ–‡ä»¶å†…å®¹æŸ¥çœ‹ 3.Linuxç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç† ç”¨æˆ·è´¦å·ç®¡ç† æ·»åŠ æ–°ç”¨æˆ·è´¦å· åˆ é™¤è´¦å· ä¿®æ”¹è´¦å· ç”¨æˆ·å¯†ç ç®¡ç† ç”¨æˆ·è´¦å·ç»„ç®¡ç†ä»¥åŠæ‰¹é‡åˆ›å»ºç”¨æˆ· https://www.runoob.com/linux/linux-user-manage.html
4.Linuxç£ç›˜ç®¡ç† df 1 2 3 4 5 6 7 8 9 10 df [-ahikHTm] [ç›®å½•æˆ–æ–‡ä»¶å] #e.g. df # å°†ç³»ç»Ÿå†…æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿåˆ—å‡ºæ¥ df -h # å°†å®¹é‡ç»“æœç”¨GB/MBæ ¼å¼æ˜¾ç¤º df -h /home du duå‘½ä»¤ä¹Ÿæ˜¯æŸ¥çœ‹ä½¿ç”¨ç©ºé—´çš„ï¼Œä½†æ˜¯ä¸dfå‘½ä»¤ä¸åŒçš„æ˜¯Linux duå‘½ä»¤æ˜¯å¯¹æ–‡ä»¶å’Œç›®å½•ç£ç›˜ä½¿ç”¨çš„ç©ºé—´è¿›è¡ŒæŸ¥çœ‹ã€‚
...</p></div><footer class=entry-footer><span title='2025-02-27 02:22:00 +0000 UTC'>February 27, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>128 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to LinuxåŸºç¡€çŸ¥è¯†åŠæ“ä½œ" href=https://Pan-Binghong.github.io/daily-learning/knowledge/linux%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%8F%8A%E6%93%8D%E4%BD%9C/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>å¤§æ¨¡å‹åˆ†å¸ƒå¼è®­ç»ƒ_DeepSpeed</h2></header><div class=entry-content><p>ğŸ’¡ è®°å½•å­¦ä¹ DeepSpeedå…¨è¿‡ç¨‹ã€‚å«åŸç†ï¼Œä»£ç ã€‚
ç®€ä»‹|SummaryÂ DeepSpeedæ˜¯Microsoft(å¾®è½¯)å¼€å‘çš„å¼€æºæ·±åº¦å­¦ä¹ ä¼˜åŒ–åº“, çš†åœ¨æé«˜å¤§è§„æ¨¡æ¨¡å‹è®­ç»ƒçš„æ•ˆç‡å’Œå¯æ‹“å±•æ€§ã€‚é€šè¿‡å¤šç§æ–¹å¼åŠ é€Ÿæ¨¡å‹è®­ç»ƒ, æ–¹æ³•æœ‰: æ¨¡å‹å¹¶è¡ŒåŒ–ã€æ¢¯åº¦ç´¯åŠ ã€åŠ¨æ€ç²¾åº¦ç¼©æ”¾ã€æœ¬åœ°æ¨¡å‹æ··åˆç²¾åº¦ç­‰ã€‚
DeepSpeedä½œä¸ºå¤§æ¨¡å‹è®­ç»ƒåŠ é€Ÿåº“, ä½äºæ¨¡å‹è®­ç»ƒæ¡†æ¶å’Œæ¨¡å‹ä¹‹é—´, ç”¨æ¥æå‡è®­ç»ƒã€æ¨ç†ç­‰ã€‚
æ ¸å¿ƒæŠ€æœ¯|Technology ZeRO(é›¶å†—ä½™ä¼˜åŒ–å™¨) ZeROå¯ä»¥è®¤ä¸ºæ˜¯æ•°æ®å¹¶è¡Œ, ä½†æ˜¯ç”¨åˆ°äº†æ¨¡å‹å¹¶è¡Œçš„æ€æƒ³ã€‚
ZeROæ˜¯ä¸€ç§ç”¨äºå¤§è§„æ¨¡åˆ†å¸ƒå¼æ·±åº¦å­¦ä¹ çš„æ–°å‹å†…å­˜ä¼˜åŒ–æŠ€æœ¯ã€‚ä¸»è¦æé«˜è®­ç»ƒæ—¶çš„æ˜¾å­˜æ•ˆç‡å’Œè®¡ç®—æ•ˆç‡ã€‚ZeROé€šè¿‡åœ¨æ•°æ®å¹¶è¡Œè¿›ç¨‹ä¹‹é—´åˆ’åˆ†æ¨¡å‹çŠ¶æ€å‚æ•°ã€æ¢¯åº¦å’Œä¼˜åŒ–å™¨çŠ¶æ€æ¥æ¶ˆé™¤æ•°æ®å¹¶è¡Œè¿›ç¨‹ä¸­çš„å†…å­˜å†—ä½™, å¹¶ä¸æ˜¯å¤åˆ¶å®ƒä»¬ã€‚åœ¨è®­ç»ƒæœŸé—´ä½¿ç”¨åŠ¨æ€é€šä¿¡è°ƒåº¦æ¥åœ¨åˆ†å¸ƒå¼è®¾å¤‡ä¹‹é—´å…±äº«å¿…è¦çš„çŠ¶æ€, ä»¥ä¿æŒæ•°æ®å¹¶è¡Œçš„è®¡ç®—ç²’åº¦å’Œé€šä¿¡é‡ã€‚
ZeROçš„ä¸‰ä¸ªé˜¶æ®µä»¥åŠå¯¹åº”åŠŸèƒ½ ä¼˜åŒ–å™¨çŠ¶æ€åˆ†åŒº(Pos): æ˜¾å­˜æ¶ˆè€—å‡å°‘4å€, é€šä¿¡é‡ä¸æ•°æ®å¹¶è¡Œç›¸åŒã€‚ æ–°å¢æ¢¯åº¦åˆ†åŒº(Pos+g): æ˜¾å­˜æ¶ˆè€—å‡å°‘8å€, é€šä¿¡é‡ä¸æ•°æ®å¹¶è¡Œç›¸åŒã€‚ æ–°å¢æ¨¡å‹å‚æ•°åˆ†åŒº(Pos+g+p): æ¨¡å‹å ç”¨çš„æ˜¾å­˜è¢«å¹³å‡åˆ†é…åˆ°æ¯ä¸ªGPUä¸­, æ˜¾å­˜æ¶ˆè€—é‡ä¸æ•°æ®å¹¶è¡Œçš„å¹¶è¡Œåº¦æˆçº¿æ€§åæ¯”å…³ç³», ä½†é€šä¿¡é‡ä¼šæœ‰äº›è®¸å¢åŠ ã€‚ä¾‹å¦‚ï¼Œåœ¨64ä¸ªGPUï¼ˆNd=64ï¼‰ä¹‹é—´è¿›è¡Œæ‹†åˆ†å°†äº§ç”Ÿ64å€çš„å†…å­˜ç¼©å‡ã€‚é€šä¿¡é‡æœ‰50%çš„é€‚åº¦å¢é•¿ã€‚| è®­ç»ƒé€Ÿåº¦ä¼šä¸‹é™ ğŸ’¡ ä¸ªäººæ€»ç»“
ZeRO-Offload æ ¸å¿ƒæ€æƒ³: æ˜¾å­˜ä¸è¶³ï¼Œå†…å­˜æ¥è¡¥ã€‚å°†éƒ¨åˆ†GPUçš„è®¡ç®—å’Œå­˜å‚¨ä¸‹æ”¾åˆ°CPUå’Œå†…å­˜ï¼Œå¿…ç„¶æ¶‰åŠCPUå’ŒGPUä¹‹é—´çš„é€šä¿¡å¢åŠ ï¼Œä¸èƒ½è®©é€šä¿¡æˆä¸ºç“¶é¢ˆï¼Œæ­¤å¤–GPUçš„è®¡ç®—æ•ˆç‡ç›¸æ¯”äºCPUä¹Ÿæ˜¯æ•°é‡çº§ä¸Šçš„ä¼˜åŠ¿ï¼Œä¹Ÿä¸èƒ½è®©CPUå‚ä¸è¿‡å¤šè®¡ç®—ï¼Œé¿å…æˆä¸ºç³»ç»Ÿç“¶é¢ˆï¼Œåªæœ‰å‰ä¸¤æ¡æ»¡è¶³çš„å‰æä¸‹ï¼Œå†è€ƒè™‘æœ€å°åŒ–æ˜¾å­˜çš„å ç”¨ã€‚
ZeRO-Infinity ZeRO-Offloadæ›´ä¾§é‡å•å¡åœºæ™¯ï¼Œè€ŒZeRO-Infinityåˆ™æ˜¯å…¸å‹çš„å·¥ä¸šç•Œé£æ ¼ï¼Œå¥”ç€æå¤§è§„æ¨¡è®­ç»ƒå»äº†ã€‚
DeepSpeedå®‰è£… 1 pip install deepspeed å®‰è£…åè¾“å…¥ds_reportéªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ DeepSpeedä½¿ç”¨ DeepSpeed åŠŸèƒ½å¯ä»¥é€šè¿‡æŒ‡å®šä¸ºÂ args.deepspeed_configÂ çš„é…ç½® JSON æ–‡ä»¶å¯ç”¨ã€ç¦ç”¨æˆ–é…ç½®ã€‚ä¸‹é¢å±•ç¤ºäº†ç¤ºä¾‹é…ç½®æ–‡ä»¶ã€‚
Example ä»£ç å¯¹æ¯”ä¼ ç»Ÿä¸DeepSpeedçš„ä¸»è¦åŒºåˆ« DeepSpeed åˆå§‹åŒ–ï¼š ZeRO-2 é…ç½®ï¼š è®­ç»ƒå¾ªç¯ï¼š è®¾å¤‡ç®¡ç†ï¼š Reference</p></div><footer class=entry-footer><span title='2025-01-07 01:29:00 +0000 UTC'>January 7, 2025</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>58 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to å¤§æ¨¡å‹åˆ†å¸ƒå¼è®­ç»ƒ_DeepSpeed" href=https://Pan-Binghong.github.io/daily-learning/knowledge/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%AD%E7%BB%83_deepspeed/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>å¤§æ¨¡å‹åˆ†å¸ƒå¼è®­ç»ƒ_æ¨¡å‹å¹¶è¡Œ</h2></header><div class=entry-content><p>ğŸ’¡ è®°å½•æ¨¡å‹å¹¶è¡Œçš„æ–¹æ³•ä»¥åŠä»£ç å®ç°ã€‚
æ¨¡å‹å¹¶è¡ŒåŸç†è§£é‡Š æ ¸å¿ƒæ€æƒ³:æ¨¡å‹è¢«åˆ†å‰²å¹¶åˆ†å¸ƒåœ¨ä¸€ä¸ªGPUå†…ã€‚
å¼ é‡å¹¶è¡Œ:å±‚å†…å¹¶è¡Œ æµæ°´çº¿å¹¶è¡Œ:å±‚é—´å¹¶è¡Œ æµæ°´çº¿å¹¶è¡Œ å¾®æ‰¹æ¬¡æµæ°´çº¿å¹¶è¡ŒMicroBatch å¾®æ‰¹æ¬¡æµæ°´çº¿å¹¶è¡Œå’Œæœ´ç´ æµæ°´çº¿å‡ ä¹ç›¸åŒï¼Œå®ƒé€šè¿‡ä¼ å…¥çš„Minibatchåˆ‡åˆ†ä¸ºMicroBatchï¼Œä»¥åŠäººä¸ºåˆ›å»ºæµæ°´çº¿è§£å†³GPUç©ºé—²é—®é¢˜ï¼Œä»è€Œå…è®¸ä¸åŒGPUåŒæ—¶å‚ä¸è®¡ç®—è¿‡ç¨‹ã€‚
ç›®å‰ä¸šç•Œå¸¸è§çš„æµæ°´çº¿å¹¶è¡Œæ–¹æ³• GPipe å’Œ PipeDream éƒ½é‡‡ç”¨å¾®æ‰¹æ¬¡æµæ°´çº¿å¹¶è¡Œæ–¹æ¡ˆã€‚
Gpipe ä»£ç ç¤ºä¾‹ è§£å†³é—®é¢˜ å¼ é‡å¹¶è¡Œ Reference</p></div><footer class=entry-footer><span title='2024-12-30 08:33:00 +0000 UTC'>December 30, 2024</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>19 words</span>&nbsp;Â·&nbsp;<span>Pan Binghong</span></footer><a class=entry-link aria-label="post link to å¤§æ¨¡å‹åˆ†å¸ƒå¼è®­ç»ƒ_æ¨¡å‹å¹¶è¡Œ" href=https://Pan-Binghong.github.io/daily-learning/knowledge/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%AD%E7%BB%83_%E6%A8%A1%E5%9E%8B%E5%B9%B6%E8%A1%8C/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://Pan-Binghong.github.io/daily-learning/tags/knowledge/page/2/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://Pan-Binghong.github.io/daily-learning/>Pan Binghong's Tech Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg></a><div class=reading-progress-bar id=reading-progress></div><script>window.addEventListener("scroll",function(){const e=document.getElementById("reading-progress");if(!e)return;const t=window.innerHeight,n=document.documentElement.scrollHeight-t,s=window.scrollY,o=s/n*100;e.style.width=o+"%"}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".copy-text");e.forEach(e=>{e.addEventListener("click",function(){this.textContent="âœ“ å·²å¤åˆ¶",setTimeout(()=>{this.textContent="å¤åˆ¶"},2e3)})})}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll('a[href^="http"]');e.forEach(e=>{e.hostname!==window.location.hostname&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".post-content img");e.forEach(e=>{e.style.cursor="pointer",e.addEventListener("click",function(){window.open(this.src,"_blank")})})})</script><style>#top-link{transition:all .3s ease}#top-link:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,.2)}</style><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>