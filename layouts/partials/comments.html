{{- /* Comments area start */ -}}
{{- /* Comments for Giscus (GitHub Discussions) */ -}}

{{- if (.Params.comments | default .Site.Params.comments) -}}
<div class="comments-section">
  <hr class="comments-divider" />

  {{- if .Site.Params.giscus -}}
  <div class="giscus-comments">
    <h3 class="comments-title">ğŸ’¬ è¯„è®ºè®¨è®º</h3>
    <p class="comments-hint">
      ä½¿ç”¨ GitHub è´¦å·ç™»å½•å³å¯å‚ä¸è®¨è®ºã€‚è¯„è®ºå°†åŒæ­¥åˆ°
      <a href="https://github.com/{{ .Site.Params.giscus.repo }}/discussions" target="_blank" rel="noopener">GitHub Discussions</a>
    </p>

    <script
      src="https://giscus.app/client.js"
      data-repo="{{ .Site.Params.giscus.repo }}"
      data-repo-id="{{ .Site.Params.giscus.repoID }}"
      data-category="{{ .Site.Params.giscus.category }}"
      data-category-id="{{ .Site.Params.giscus.categoryID }}"
      data-mapping="{{ .Site.Params.giscus.mapping | default `pathname` }}"
      data-strict="{{ .Site.Params.giscus.strict | default `0` }}"
      data-reactions-enabled="{{ .Site.Params.giscus.reactionsEnabled | default `1` }}"
      data-emit-metadata="{{ .Site.Params.giscus.emitMetadata | default `0` }}"
      data-input-position="{{ .Site.Params.giscus.inputPosition | default `bottom` }}"
      data-theme="{{ .Site.Params.giscus.theme | default `preferred_color_scheme` }}"
      data-lang="{{ .Site.Params.giscus.lang | default `zh-CN` }}"
      data-loading="{{ .Site.Params.giscus.loading | default `lazy` }}"
      crossorigin="anonymous"
      async>
    </script>
  </div>
  {{- end -}}
</div>
{{- end -}}
{{- /* Comments area end */ -}}

<style>
.comments-section {
  margin-top: 3rem;
}

.comments-divider {
  margin: 2rem 0;
  border: none;
  border-top: 2px solid var(--border);
}

.comments-title {
  font-size: 1.5rem;
  margin-bottom: 1rem;
  color: var(--primary);
}

.comments-hint {
  font-size: 0.9rem;
  color: var(--secondary);
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: var(--code-bg);
  border-radius: 8px;
  border-left: 4px solid var(--primary);
}

.comments-hint a {
  color: var(--primary);
  text-decoration: underline;
}

.giscus-comments {
  margin-top: 2rem;
}
</style>
